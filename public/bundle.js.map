{"version":3,"file":"bundle.js","sources":["../src/core/load/load-spinner.js","../src/core/components/grabbable.js","../src/core/components/nav-pointer.js","../src/core/components/weather-viz.js","../src/core/components/shaderfrog/shader-frog.js","../src/stats/elements/ring-dial.js","../src/stats/elements/meter.js","../src/core/login/login.js","../src/demo/components/cloud.js","../src/demo/components/dotrow.js","../src/core/components/log.js","../src/core/components/launchable.js","../src/demo/components/launchrow.js","../src/core/components/vrui/controls.js","../src/core/components/vrui/vrui.js","../src/core/components/chat.js","../src/core/components/cs1-jukebox.js","../src/core/components/jump.js","../src/core/components/my-components.js","../src/main.js","../src/core/utils/utils.js","../src/demo/components/proximity-glitch.js","../src/stats/stats.js","../src/core/components/game.js","../src/core/components/player.js","../src/core/services/bgm.js","../src/core/socket/client-socket.js","../src/core/components/collectible.js","../src/demo/components/npc.js","../src/core/components/userdata.js","../src/demo/components/iot-api.js"],"sourcesContent":["export default(()=>{\n\n  window.addEventListener('load', function () {\n    let loadSpinner = document.createElement('div');\n    loadSpinner.className = 'lds-grid';\n    for(let i=0;i<9;i++){\n      loadSpinner.appendChild(document.createElement('div'));\n    } \n    loadSpinner.style.left = window.innerWidth/2 - 32 + 'px';\n    let loadingScreen =  document.querySelector('#loading-screen');\n    loadingScreen.style.width = window.innerWidth + 'px';\n    loadingScreen.style.height = window.innerHeight + 'px';\n    loadingScreen.appendChild(loadSpinner);\n  }, false);\n  \n})()","function findComponent(componentName) {\n  return document.querySelector(`[${componentName}]`).components[componentName];\n}\n//Moves the subject to a new parent while preserving its transform in the world\nfunction reparentObject3D(subject, newParent) {\n  subject.updateMatrixWorld();\n  subject.matrix.copy(subject.matrixWorld);\n  subject.applyMatrix(new THREE.Matrix4().getInverse(newParent.matrixWorld));\n  newParent.add(subject);\n}\n// Copys the world transforms between objects even if the have different parents\nvar copyTransform = (function() {\n  var scratchMat = new THREE.Matrix4();\n  return function(source, destination) {\n    destination.matrix.copy(source.matrixWorld);\n    destination.applyMatrix(\n      scratchMat.getInverse(destination.parent.matrixWorld)\n    );\n  };\n})();\nfunction toVector(o) {\n  return new THREE.Vector3(o.x, o.y, o.z);\n}\nfunction toList(collection) {\n  var list = [];\n  for (var i = 0; i < collection.length; i++) {\n    list.push(collection[i]);\n  }\n  return list;\n}\nfunction addDot(el, position, radius, color) {\n  color = color || \"red\";\n  var dot = document.createElement(\"a-sphere\");\n  dot.setAttribute(\"radius\", radius);\n  dot.setAttribute(\"position\", position);\n  dot.setAttribute(\"color\", color);\n  el.appendChild(dot);\n}\nfunction directionLocalToWorld(object, localDirection) {\n  return localDirection.transformDirection(object.matrixWorld);\n}\n\nexport default (function grabbable() {\n  AFRAME.registerSystem(\"grabbable\", {\n    schema: {}, // System schema. Parses into `this.data`.\n\n    init: function() {\n      //use object to allow for further development\n      CS1.grabbables = {};\n\n      CS1.__updateGrabbables = grabbablesData => {\n        if (\n          Object.keys(CS1.grabbables).length === 0 ||\n          !CS1.grabbables[grabbablesData[0].name] ||\n          !CS1.game.hasBegun\n        )\n          return;\n        grabbablesData.forEach((d, index) => {\n          let b = CS1.grabbables[d.name];\n          if(!b)return;\n          if (CS1.debug) {\n            console.log(\"Individual body data from server:\");\n            console.log(d);\n          }\n          if (d.position) b.object3D.position.copy(d.position);\n          if (d.scale) b.object3D.scale.copy(d.scale);\n          if (d.rotation) b.object3D.quaternion.copy(d.rotation);\n        });\n      };\n\n      CS1.socket.on(\"add-grabbable-primitive\", d => {\n        if (d.origin == CS1.socket.id || !CS1.game.hasBegun) return;\n        const entity = document.createElement(d.type);\n        entity.setAttribute(\"grabbable\", \"remote:true\");\n        entity.object3D.position.set(\n          d.position.x,\n          d.position.y,\n          d.position.z\n        );\n        entity.object3D.scale.set(\n          d.scale.x,\n          d.scale.y,\n          d.scale.z\n        );\n        entity.object3D.setRotationFromQuaternion(\n          new THREE.Quaternion(\n            d.rotation.x,\n            d.rotation.y,\n            d.rotation.z,\n            d.rotation.w\n          )\n        );\n        entity.soundState = d.soundState;\n        console.log(\"adding remote late grabbable\");\n        if (d.custom) {\n          for (let [key, value] of Object.entries(d.custom)) {\n            if (value) entity.setAttribute(key, value);\n            if (key == \"collectible\") {\n              console.log(\"detected collectible on remote late grabbable\");\n            }\n            if (key == \"launchable\") {\n              entity.setAttribute(\"launchable\", \"\");\n              console.log(\"detected launchable on remote late grabbable\");\n            }\n            if (key == \"postRelease\") {\n              entity.setAttribute('grabbable',`remote:true;postRelease:${value}`);\n              console.log(\"detected postRelease on remote late grabbable\");\n            }\n          }\n        }\n        CS1.scene.appendChild(entity);\n      });\n      \n       CS1.socket.on(\"post-release\", grabbableName=>{\n        if( CS1.grabbables[grabbableName] &&\n             typeof CS1.callbacks[CS1.grabbables[grabbableName].components.grabbable.data.postRelease]=='function' )\n          CS1.callbacks[CS1.grabbables[grabbableName].components.grabbable.data.postRelease](grabbableName);\n      });\n      \n    }\n  }); //end system definition\n\n  AFRAME.registerComponent(\"grabbable\", {\n    schema: {\n      origin: { type: \"selector\" },\n      remote: { default: false },\n      postRelease: { default: '' }\n    },\n\n    init: function() {\n      var self = this;\n      self.cursor = false;\n      self.isDragging = false;\n      self.originEl = this.data.origin || this.el;\n      self.proxyObject = null;\n\n      self.el.classList.add(\"interactive\");\n\n      if (self.el.components.log) {\n        //this.el.components.log.data.channel = this.name;\n        self.el.setAttribute(\"log\", `channel:${String(self.name)}`);\n        if (!CS1.socket._callbacks[\"$vr-log\"])\n          CS1.socket.on(\"vr-log\", data => {\n            CS1.log(data.msg, String(data.channel));\n          });\n      }\n\n      this.name = Object.keys(CS1.grabbables).length;\n      CS1.grabbables[this.name] = self.el;\n      \n      \n\n      if (CS1 && CS1.game && CS1.game.hasBegun && !this.data.remote) {\n        console.log(\"Adding a local late grabbable.\");\n        const c = {};\n        c.color = self.el.getAttribute(\"color\");\n        const s = self.el.getAttribute(\"src\");\n        if (s) c.src = s;\n        const collectible = self.el.components.collectible;\n        if (collectible) {\n          c.collectible = collectible.data;\n          console.log(\"detected collectible on local late grabbable\");\n        }\n        const launchable = self.el.components.launchable;\n        if (launchable) {\n          c.launchable = true;\n          console.log(\"detected launchable on local late grabbable\");\n        }\n        if (this.data.postRelease) {\n          c.postRelease = this.data.postRelease;\n        }\n        onGameStart();\n        CS1.socket.emit(\"add-grabbable-primitive\", {\n          name: self.name,\n          position: self.el.object3D.position,\n          scale: self.el.object3D.scale,\n          rotation: {\n            x: self.el.object3D.quaternion.x,\n            y: self.el.object3D.quaternion.y,\n            z: self.el.object3D.quaternion.z,\n            w: self.el.object3D.quaternion.w\n          },\n          soundState: self.el.soundState,\n          type: self.el.nodeName,\n          custom: c,\n          origin: CS1.socket.id\n        });\n      }\n\n      self.el.addEventListener(\"mousedown\", grab);\n      self.el.addEventListener(\"mouseup\", release);\n\n      function onGameStart() {\n        if (CS1.device == \"Mobile\") {\n          self.el.addEventListener(\"click\", function(e) {\n            grab(e);\n            setTimeout(function(e) {\n              document\n                .querySelector(\"#cam-cursor\")\n                .setAttribute(\"material\", \"color: yellow\");\n              release(e);\n              setTimeout(function(e) {\n                document\n                  .querySelector(\"#cam-cursor\")\n                  .setAttribute(\"material\", \"color: crimson\");\n              }, 500);\n            }, 5000);\n          });\n\n          self.el.addEventListener(\"mouseenter\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"green\" });\n          });\n          self.el.addEventListener(\"mouseleave\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"crimson\" });\n          });\n        } else if (CS1.device == \"Standard\") {\n          //No headset and not mobile\n\n          self.el.addEventListener(\"mouseenter\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"green\" });\n          });\n          self.el.addEventListener(\"mouseleave\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"crimson\" });\n          });\n        }\n        document.removeEventListener(\"gameStart\", onGameStart);\n      }\n\n      document.addEventListener(\"gameStart\", onGameStart);\n\n      function grab(e) {\n        e.cancelBubble = true;\n        if (self.isDragging) return;\n\n        self.isDragging = true;\n\n        self.cursor = e.detail.cursorEl;\n        if (self.cursor == self.el.sceneEl)\n          self.cursor = document.querySelector(\"[camera]\"); //This handles the scenario where the user isn't using motion controllers\n\n        // avoid seeing flickering at origin during reparenting\n        self.el.setAttribute(\"visible\", false);\n        setTimeout(function() {\n          self.el.setAttribute(\"visible\", true);\n        }, 20);\n\n        createProxyObject(self.cursor.object3D);\n\n        self.originEl.emit(\"grabStart\", e);\n        self.originEl.addState(\"moving\");\n      }\n\n      if (AFRAME.utils.device.checkHeadsetConnected()) {\n        self.el.addEventListener(\"mouseup\", release);\n      } else self.el.addEventListener(\"mouseup\", release);\n\n      function release(e) {\n        if (self.isDragging) {\n          //CS1.socket.emit('logall',{msg:`${CS1.myPlayer.name} releasing!` ,channel:self.name});\n          self.isDragging = false;\n\n          if (self.proxyObject) {\n            self.proxyObject.parent.remove(self.proxyObject);\n            self.proxyObject = null;\n          }\n\n          self.originEl.setAttribute(\n            \"position\",\n            self.originEl.getAttribute(\"position\")\n          ); //seems pointless, but will force the event system to notify subscribers\n          self.originEl.setAttribute(\n            \"rotation\",\n            self.originEl.getAttribute(\"rotation\")\n          ); //seems pointless, but will force the event system to notify subscribers\n\n          \n          \n          if(self.data.postRelease){\n            CS1.socket.emit(\"post-release\", self.name); \n            CS1.callbacks[self.data.postRelease](self.name);\n          }\n          \n          self.originEl.emit(\"grabEnd\", e);\n            \n          setTimeout(e=>{\n            self.originEl.removeState(\"moving\");\n          },500);\n          \n          \n          \n        }\n      }\n\n      function createProxyObject(cursorObject) {\n        self.proxyObject = new THREE.Object3D();\n        self.originEl.visible = false;\n        //handle object momentary flicker at world origin\n        setTimeout(function() {\n          self.originEl.visible = true;\n        }, 1000);\n        cursorObject.add(self.proxyObject);\n        copyTransform(self.originEl.object3D, self.proxyObject);\n      }\n    },\n\n    tick: function() {\n      var self = this;\n      if (self.proxyObject) {\n        copyTransform(self.proxyObject, self.originEl.object3D);\n        self.originEl.setAttribute(\n          \"position\",\n          self.originEl.getAttribute(\"position\")\n        ); //seems pointless, but will force the event system to notify subscribers\n        self.originEl.setAttribute(\n          \"rotation\",\n          self.originEl.getAttribute(\"rotation\")\n        ); //seems pointless, but will force the event system to notify subscribers\n      }\n    }\n  });\n})();\n","export default (function navpointer(){\n\n  AFRAME.registerComponent('nav-pointer', {\n  init: function () {\n    const el = this.el;\n// On click, send the NPC to the target location.\n    el.addEventListener('click',e=>{\n      const ctrlEl = el.sceneEl.querySelector('[nav-agent]');\n      if(ctrlEl) ctrlEl.setAttribute('nav-agent', {\n        active: true,\n        destination: e.detail.intersection.point\n      });\n    });\n    el.addEventListener('mouseenter',e=>{\n      el.setAttribute('material', {color: 'green'});\n    });\n    el.addEventListener('mouseleave',e=>{\n      el.setAttribute('material', {color: 'crimson'})\n    });\n    \n    el.addEventListener('mousedown',e=>{\n      //console.log(e);\n    });\n \n    // Refresh the raycaster after models load.\n    el.sceneEl.addEventListener('object3dset',e=>{\n      this.el.components.raycaster.refreshObjects();\n    });\n  }\n});\n  \n})()","export default (function d3graph(){\n  \n  AFRAME.registerComponent('weather-viz', {\n    schema:{\n      side: {type:'string', default:'double'},\n      url: {type:'string', default:'https://api.openweathermap.org/data/2.5/forecast/?appid=56df5e300fabead0a56fc2d706e6aa7d&id=4959473'}\n    },\n    dependencies: ['geometry', 'material'],\n    init: function () {\n      this.el.setAttribute('width',6);\n      this.el.setAttribute('height',4);\n      this.canvas=document.createElement('canvas');\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.left = -2000;\n      this.canvas.id=CS1.utils.uid();\n      this.canvas.setAttribute('crossOrigin','anonymous');\n      document.querySelector('a-scene').appendChild(this.canvas);\n      this.el.setAttribute('material',`shader:flat;src:#${this.canvas.id};side:${this.data.side}`);\n      \n      this.cursor = document.querySelector('#cam-cursor');\n\n      var ctx = this.ctx = this.canvas.getContext('2d');\n      ctx.fillStyle = 'rgb(0, 0, 0)';\n      ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);  \n      this.dataProcessed=false;\n      fetch(this.data.url)\n        .then(resp=>{return resp.json()})\n        .then(json=>{this.processData(json)})\n        .catch(err=>{console.log(err)})\n    },\n    processData: function(dataToProcess){\n        this.data = [];\n        dataToProcess.list.forEach(day=>{\n          //console.log(day.dt_txt , this.k2f(day.main.temp_max)+'F');\n          this.data.push({dt:day.dt_txt,temp_max:this.k2f(day.main.temp_max)});\n        });\n        this.dataProcessed=true;\n    },\n    k2f: function(k){\n      return Math.round((k - 273.15) * 9/5 + 32);\n    },\n    tick: function(t,dt){\n      if(!this.dataProcessed)return;\n      this.visualizeData(t);\n      this.updateCanvas(); \n    },\n    visualizeData: function(t){\n      let canvas = this.canvas;\n      let dt_width = canvas.width/this.data.length;\n      let ctx = this.ctx;\n      if(this.cursor.getAttribute('material').color=='green')t=1000;\n      this.data.forEach((d,i)=>{\n        let hue = t*(d.temp_max / 900);\n        ctx.fillStyle = 'hsl(' + hue + ', 50%, 30%)';\n        ctx.fillRect(i*dt_width, 0, dt_width, canvas.height);\n      });\n      \n      \n      \n    \n    },\n    drawRectangles: function(t){\n      var canvas = this.canvas;\n      var ctx = this.ctx;\n      var x;\n      var y;\n      var hue = t / 10;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 80%)';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      hue = t / 15;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 60%)';\n      x = canvas.width / 10;\n      y = canvas.height / 10;\n      ctx.fillRect(x, y, canvas.width - x * 2, canvas.height - y * 2);\n      hue = t / 20;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 40%)';\n      x = canvas.width / 5;\n      y = canvas.height / 5;\n      ctx.fillRect(x, y, canvas.width - x * 2, canvas.height - y * 2);\n    },\n    updateCanvas: function(){\n      var el = this.el;\n      var material;\n      material = el.getObject3D('mesh').material;\n        if (!material.map) {\n            return;\n      }\n      material.map.needsUpdate = true;   \n    }\n    \n  });\n  \n})()","var shaders = {};\nimport Polkadot_Shader from './shaders/Polkadot_Shader.json';\nshaders['Polkadot_Shader']=Polkadot_Shader;\nimport Sun_Shader from './shaders/Sun_Shader.json';\nshaders['Sun_Shader']=Sun_Shader;\nimport Jelly_Shader from './shaders/Jelly_Shader.json';\nshaders['Jelly_Shader']=Jelly_Shader;\nimport Green_Dance_Shader from './shaders/Green_Dance_Shader.json';\nshaders['Green_Dance_Shader']=Green_Dance_Shader;\nimport Cosmic_Shader from './shaders/Cosmic_Shader.json';\nshaders['Cosmic_Shader']=Cosmic_Shader;\nimport Cool_Tiles_Shader from './shaders/Cool_Tiles_Shader.json';\nshaders['Cool_Tiles_Shader']=Cool_Tiles_Shader;\nimport Disco_Shader from './shaders/Disco_Shader.json';\nshaders['Disco_Shader']=Disco_Shader;\nimport Marching_Ants_Shader from './shaders/Marching_Ants_Shader.json';\nshaders['Marching_Ants_Shader']=Marching_Ants_Shader;\nimport Goo_Shader from './shaders/Goo_Shader.json';\nshaders['Goo_Shader']=Goo_Shader;\nimport Psycho_Shader from './shaders/Psycho_Shader.json';\nshaders['Psycho_Shader']=Psycho_Shader;\nimport Ova_Shader from './shaders/Ova_Shader.json';\nshaders['Ova_Shader']=Ova_Shader;\nimport Thruster_Shader from './shaders/Thruster_Shader.json';\nshaders['Thruster_Shader']=Thruster_Shader;\nimport Flowing_Circles_Shader from './shaders/Flowing_Circles_Shader.json';\nshaders['Flowing_Circles_Shader']=Flowing_Circles_Shader;\nimport Electric_Shader from './shaders/Electric_Shader.json';\nshaders['Electric_Shader']=Electric_Shader;\nimport CS1_Shader from './shaders/CS1_Shader.json';\nshaders['CS1_Shader']=CS1_Shader;\nimport Force_Field_Shader from './shaders/Force_Field_Shader.json';\nshaders['Force_Field_Shader']=Force_Field_Shader;\n\nexport default CS1=>{\n  \nCS1.shaderfrog = shaders;\n\nvar defaultThreeUniforms = [\n    'normalMatrix', 'viewMatrix', 'projectionMatrix', 'position', 'normal',\n    'modelViewMatrix', 'uv', 'uv2', 'modelMatrix'\n];\n\nfunction ShaderRuntime() {}\n\nShaderRuntime.prototype = {\n\n    mainCamera: null,\n    cubeCameras: {},\n\n    reserved: { time: null, cameraPosition: null },\n\n    umap: {\n        float: { type: 'f', value: 0 },\n        int: { type: 'i', value: 0 },\n        vec2: { type: 'v2', value() { return new THREE.Vector2(); } },\n        vec3: { type: 'v3', value() { return new THREE.Vector3(); } },\n        vec4: { type: 'v4', value() { return new THREE.Vector4(); } },\n        samplerCube: { type: 't' },\n        sampler2D: { type: 't' }\n    },\n\n    getUmap( type ) {\n        let value = this.umap[ type ].value;\n        return typeof value === 'function' ? value() : value;\n    },\n\n    registerCamera( camera ) {\n\n        if( !( camera instanceof THREE.Camera ) ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.mainCamera = camera;\n\n    },\n\n    registerCubeCamera( name, camera ) {\n\n        if( !camera.renderTarget ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.cubeCameras[ name ] = camera;\n\n    },\n\n    unregisterCamera( name ) {\n\n        if( name in this.cubeCameras ) {\n\n            delete this.cubeCameras[ name ];\n            \n        } else if( name === this.mainCamera ) {\n\n            delete this.mainCamera;\n\n        } else {\n\n            throw new Error( 'You never registered camera ' + name );\n\n        }\n\n    },\n\n    updateSource( identifier, config, findBy ) {\n\n        findBy = findBy || 'name';\n\n        if( !this.shaderTypes[ identifier ] ) {\n            throw new Error( 'Runtime Error: Cannot update shader ' + identifier + ' because it has not been added.' );\n        }\n\n        let newShaderData = this.add( identifier, config ),\n            shader, x;\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                extend( shader.material, omit( newShaderData, 'id' ) );\n                shader.material.needsUpdate = true;\n            }\n        }\n\n    },\n\n    renameShader( oldName, newName ) {\n\n        let x, shader;\n\n        if( !( oldName in this.shaderTypes ) ) {\n            throw new Error('Could not rename shader ' + oldName + ' to ' + newName + '. It does not exist.');\n        }\n\n        this.shaderTypes[ newName ] = this.shaderTypes[ oldName ];\n        delete this.shaderTypes[ oldName ];\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader.name === oldName ) {\n                shader.name = newName;\n            }\n        }\n\n    },\n\n    get( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n\n        if( !shaderType.initted ) {\n\n            this.create( identifier );\n        }\n\n        return shaderType.material;\n\n    },\n\n    add( shaderName, config ) {\n\n        let newData = clone( config ),\n            uniform;\n        newData.fragmentShader = config.fragment;\n        newData.vertexShader = config.vertex;\n        delete newData.fragment;\n        delete newData.vertex;\n\n        for( var uniformName in newData.uniforms ) {\n            uniform = newData.uniforms[ uniformName ];\n            if( uniform.value === null ) {\n                newData.uniforms[ uniformName ].value = this.getUmap( uniform.glslType );\n            }\n        }\n        \n        if( shaderName in this.shaderTypes ) {\n            // maybe not needed? too sleepy, need document\n            extend( this.shaderTypes[ shaderName ], newData );\n        } else {\n            this.shaderTypes[ shaderName ] = newData;\n        }\n\n        return newData;\n\n    },\n\n    create( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n      \n        delete shaderType.id;\n\n        shaderType.material = new THREE.RawShaderMaterial( shaderType );\n\n        this.runningShaders.push( shaderType );\n\n        shaderType.init && shaderType.init( shaderType.material );\n        shaderType.material.needsUpdate = true;\n\n        shaderType.initted = true;\n\n        return shaderType.material;\n\n    },\n\n    updateRuntime( identifier, data, findBy ) {\n\n        findBy = findBy || 'name';\n\n        let shader, x, uniformName, uniform;\n\n        // This loop does not appear to be a slowdown culprit\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                for( uniformName in data.uniforms ) {\n\n                    if( uniformName in this.reserved ) {\n                        continue;\n                    }\n\n                    if( uniformName in shader.material.uniforms ) {\n\n                        uniform = data.uniforms[ uniformName ];\n\n                        // this is nasty, since the shader serializes\n                        // CubeCamera model to string. Maybe not update it at\n                        // all?\n                        if( uniform.type === 't' && typeof uniform.value === 'string' ) {\n                            uniform.value = this.cubeCameras[ uniform.value ].renderTarget;\n                        }\n\n                        shader.material.uniforms[ uniformName ].value = data.uniforms[ uniformName ].value;\n                    }\n                }\n            }\n        }\n\n    },\n\n    // Update global shader uniform values\n    updateShaders( time, obj ) {\n\n        let shader, x;\n\n        obj = obj || {};\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n\n            for( let uniform in obj.uniforms ) {\n                if( uniform in shader.material.uniforms ) {\n                    shader.material.uniforms[ uniform ].value = obj.uniforms[ uniform ];\n                }\n            }\n\n            if( 'cameraPosition' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.cameraPosition.value = this.mainCamera.position.clone();\n\n            }\n\n            if( 'viewMatrix' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.viewMatrix.value = this.mainCamera.matrixWorldInverse;\n\n            }\n\n            if( 'time' in shader.material.uniforms ) {\n\n                shader.material.uniforms.time.value = time;\n\n            }\n\n        }\n\n    },\n\n    shaderTypes: shaders,\n\n    runningShaders: []\n\n};\n\n// Convenience methods so we don't have to include underscore\nfunction extend() {\n    let length = arguments.length,\n        obj = arguments[ 0 ];\n\n    if( length < 2 ) {\n        return obj;\n    }\n\n    for( let index = 1; index < length; index++ ) {\n        let source = arguments[ index ],\n            keys = Object.keys( source || {} ),\n            l = keys.length;\n        for( let i = 0; i < l; i++ ) {\n            let key = keys[i];\n            obj[ key ] = source[ key ];\n        }\n    }\n\n    return obj;\n}\n\nfunction clone( obj ) {\n    return extend( {}, obj );\n}\n\nfunction omit( obj, ...keys ) {\n    let cloned = clone( obj ), x, key;\n    for( x = 0; key = keys[ x++ ]; ) {\n        delete cloned[ key ];\n    }\n    return cloned;\n}\n  \nAFRAME.registerSystem('shader-frog', {\n  init:function(){\n    this.frog_runtime = new ShaderRuntime();\n    this.clock = new THREE.Clock();\n    var self = this;\n        \n    var scene = document.querySelector('a-scene');\n    if (scene.hasLoaded) {\n      registerCamera().bind(this);;\n    } else {\n      scene.addEventListener('loaded', registerCamera);\n    }\n    function registerCamera () {\n       var camera = document.querySelector(\"a-scene\").systems[\"camera\"];\n       if(camera && camera.sceneEl && camera.sceneEl.camera){\n         camera = camera.sceneEl.camera;\n         self.frog_runtime.registerCamera(camera);\n       }\n    }\n  },\n  tick: function (t) {\n    this.frog_runtime.updateShaders( this.clock.getElapsedTime() );\n  }\n});\nAFRAME.registerComponent('shader-frog',{\n  schema:{\n    name:{type:\"string\"}\n  },\n  init: function(){\n    this.originalMaterial = this.el.getObject3D('mesh').material;\n    this.shaderData = shaders[this.data.name];\n  },\n  update: function(){\n    this.system.frog_runtime.add(this.data.name,this.shaderData);\n    var material = this.system.frog_runtime.get(this.data.name);\n    this.el.getObject3D('mesh').material = material;\n  },\n  remove: function(){\n    this.el.getObject3D('mesh').material = this.originalMaterial;\n  }\n});\n  \n}\n","\nconst defaults={\n  labelText: 'Label Text',\n  suffix: '',\n  labelColor: '#e23fcf',\n  gradientColor1: '#78F8EC',\n  gradientColor2: '#6E4AE2',\n  max: 100\n}\n\nconst RingDial = function(custom) {\n    this.opts = Object.assign({}, defaults, custom);\n    this.size = 2000/9;\n    this.strokeWidth = this.size / 8;\n    this.radius = (this.size / 2) - (this.strokeWidth / 2);\n    this.value = 0;\n    this.cachedValue = this.value;\n    this.targetValue = false;\n    this.isAnimating = false;\n    this.direction = 'up';\n    this.svg;\n    this.defs;\n    this.slice;\n    this.overlay;\n    this.text;\n    this.label;\n    this.arrow;\n    this.create(this.opts.labelColor,this.opts.gradientColor1,this.opts.gradientColor2);\n}\n\nRingDial.prototype.create = function(labelColor,gradientColor1,gradientColor2) {\n    this.createSvg();\n    this.createDefs(gradientColor1,gradientColor2);\n    this.createSlice();\n    this.createOverlay();\n    this.createText(gradientColor2);\n    //this.createArrow();\n    this.createLabel(labelColor);\n    this.opts.container.appendChild(this.svg);\n};\n\nRingDial.prototype.createSvg = function() {\n    var svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute('width', this.size + 'px');\n    svg.setAttribute('height', this.size + 'px');\n    this.svg = svg;\n};\n\nRingDial.prototype.createDefs = function(gc1,gc2) {\n    var defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n    var linearGradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradient.setAttribute('id', 'gradient'+this.opts.labelText);\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', gc2);\n    stop1.setAttribute('offset', '0%');\n    linearGradient.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', gc1);\n    stop2.setAttribute('offset', '100%');\n    linearGradient.appendChild(stop2);\n    var linearGradientBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradientBackground.setAttribute('id', 'gradient-background');\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', 'rgba(0, 0, 0, 0.2)');\n    stop1.setAttribute('offset', '0%');\n    linearGradientBackground.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', 'rgba(0, 0, 0, 0.05)');\n    stop2.setAttribute('offset', '100%');\n    linearGradientBackground.appendChild(stop2);\n    defs.appendChild(linearGradient);\n    defs.appendChild(linearGradientBackground);\n    this.svg.appendChild(defs);\n    this.defs = defs;\n};\n\nRingDial.prototype.createSlice = function() {\n    var slice = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    slice.setAttribute('fill', 'none');\n    slice.setAttribute('stroke', `url(#gradient${this.opts.labelText})`);\n    slice.setAttribute('stroke-width', this.strokeWidth);\n    slice.setAttribute('transform', 'translate(' + this.strokeWidth / 2 + ',' + this.strokeWidth / 2 + ')');\n    slice.setAttribute('class', 'animate-draw');\n    this.svg.appendChild(slice);\n    this.slice = slice;\n};\n\nRingDial.prototype.createOverlay = function() {\n    var r = this.size - (this.size / 2) - this.strokeWidth / 2;\n    var circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n    circle.setAttribute('cx', this.size / 2);\n    circle.setAttribute('cy', this.size / 2);\n    circle.setAttribute('r', r);\n    if(navigator.vendor.includes('Apple')){\n      circle.setAttribute('fill', 'rgba(0, 0, 0, 0.05)');\n    }else\n       circle.setAttribute('fill', 'url(#gradient-background)');\n    this.svg.appendChild(circle);\n    this.overlay = circle;\n};\n\nRingDial.prototype.createText = function(c) {\n    var fontSize = this.size / 3.5;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', (this.size / 2) + fontSize / 7.5);\n    text.setAttribute('y', (this.size / 2) + fontSize / 4);\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = 0 + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.opts.suffix}</tspan>`;\n    this.svg.appendChild(text);\n    this.text = text;\n};\n\nRingDial.prototype.createLabel = function(c) {\n    let n=4.5;\n    if(this.opts.labelText.length>8)n=7\n    var fontSize = this.size / n;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', this.size / 2);\n    text.setAttribute('y', (2*this.size / 3) + fontSize / (n-1));\n    text.setAttribute('font-family', 'Century Gothic, Lato');\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = this.opts.labelText;\n    this.svg.appendChild(text);\n    this.label = text;\n};\n\nRingDial.prototype.createArrow = function() {\n    var arrowSize = this.size / 10;\n    var arrowYOffset, m;\n    if(this.direction === 'up') {\n        arrowYOffset = arrowSize / 2;\n        m = -1;\n    }\n    else if(this.direction === 'down') {\n        arrowYOffset = 0;\n        m = 1;\n    }\n    var arrowPosX = ((this.size / 2) - arrowSize / 2);\n    var arrowPosY = (this.size - this.size / 3) + arrowYOffset;\n    var arrowDOffset =  m * (arrowSize / 1.5);\n    var arrow = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    arrow.setAttribute('d', 'M 0 0 ' + arrowSize + ' 0 ' + arrowSize / 2 + ' ' + arrowDOffset + ' 0 0 Z');\n    arrow.setAttribute('fill', '#97F8F0');\n    arrow.setAttribute('opacity', '0.6');\n    arrow.setAttribute('transform', 'translate(' + arrowPosX + ',' + arrowPosY + ')');\n    this.svg.appendChild(arrow);\n    this.arrow = arrow;\n};\n\nRingDial.prototype.animateStart = function() {\n    var v = 0;\n    var self = this;\n    var intervalOne = setInterval(function() {\n        var p = +(v / self.value).toFixed(2);\n        var a = (p < 0.95) ? 2 - (2 * p) : 0.05;\n        v += a;\n        // Stop\n        if(v >= +self.value) {\n            v = self.value;\n            clearInterval(intervalOne);\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.animateTo = function(to,s=3,t=0.1) {\n    let m=this.opts.max;\n    s*=m/100;\n    t*=m/100;\n    if(to>m)to=m;\n    if(to<0)to=0;\n    var v = this.value;\n    var self = this;\n    this.isAnimating = true;\n    var intervalOne = setInterval(function() {\n        var p =  (v>to)? +(to /v).toFixed(2)  : +(v / to).toFixed(2);\n        var a = (p < 0.95) ? s - (s * p) : t;\n        if(to<v){\n          v -= a;\n            // Stop\n            if(v <= -to) {\n                self.value = to;\n                clearInterval(intervalOne);\n                self.cachedValue = self.value;\n                self.isAnimating = false;\n            }\n        }else {\n           v += a;\n            // Stop\n            if(v >= +to) {\n                self.value = to;\n                if(to>=self.opts.max){\n                  self.svg.currentScale=0\n                  setTimeout(e=>{\n                    self.setValue(self.opts.max);\n                    self.svg.currentScale=1;\n                  },100);\n                }\n                clearInterval(intervalOne);\n                self.cachedValue = self.value;\n                self.isAnimating = false;\n            }\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.changeBy = function(amt) {\n   this.targetValue = this.targetValue?this.targetValue+amt:this.value+amt;\n   this.animateTo(this.targetValue);\n};\n\nRingDial.prototype.animateReset = function() {\n    this.setValue(0);\n};\n\nRingDial.prototype.polarToCartesian = function(centerX, centerY, radius, angleInDegrees) {\n  var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;\n  return {\n    x: centerX + (radius * Math.cos(angleInRadians)),\n    y: centerY + (radius * Math.sin(angleInRadians))\n  };\n}\n\nRingDial.prototype.describeArc = function(x, y, radius, startAngle, endAngle){\n    var start = this.polarToCartesian(x, y, radius, endAngle);\n    var end = this.polarToCartesian(x, y, radius, startAngle);\n    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    var d = [\n        \"M\", start.x, start.y, \n        \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y\n    ].join(\" \");\n    return d;       \n}\n\nRingDial.prototype.setValue = function(value) {\t\n\t\tvar c = (value / this.opts.max) * 360;\n\t\tif(c === 360)\n\t\t\tc = 359.99;\n\t\tvar xy = this.size / 2 - this.strokeWidth / 2;\n\t\tvar d = this.describeArc(xy, xy, xy, 180, 180 + c);\n    this.slice.setAttribute('d', d);\n    var tspanSize = (this.size / 3.5) / 3;\n    this.text.innerHTML = Math.floor(value) + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.opts.suffix}</tspan>`;\n    this.value = value;\n};\n\nexport default RingDial;","export default class Meter{\n\n  constructor(container,labelText='label',color='white',value=0,min=0,max=1,low=0.25,high=0.75,optimum=0.8){\n    this.widget = document.createElement('div');\n    this.widget.style.fontSize = 2000/9/4.5 + 'px';\n    this.widget.style.marginTop = 2000/81 + 'px';\n    this.widget.style.marginBottom = 2000/81 + 'px';\n    this.widget.style.color = color;\n    this.value = 0;\n    this.min = parseFloat(min);\n    this.max = parseFloat(max);\n    this.range = max-min;\n    this.el = document.createElement('meter');\n    this.el.cachedValue = this.value;\n    this.el.targetValue = false;\n    this.el.isAnimating = false;\n    this.el.setAttribute('value',value);\n    this.el.setAttribute('min',min);\n    this.el.setAttribute('max',max);\n    this.el.setAttribute('low',low);\n    this.el.setAttribute('high',high);\n    this.el.setAttribute('optimum',optimum);\n    this.el.style.width = 1250/8 + 'px';\n    this.el.style.height = 1250/32 + 'px';\n    this.widget.appendChild(this.el);\n    this.label = document.createElement('div');\n    this.label.style.textAlign = 'center';\n    this.label.innerHTML = labelText;\n    this.widget.appendChild(this.label);\n    container.appendChild(this.widget);\n  }\n  \n  animateTo(to) {\n      var v = parseFloat(this.el.getAttribute('value'));\n      var self = this.el;\n      self.range = this.range;\n      self.isAnimating = true;\n      var intervalOne = setInterval(function() {\n          var p =  (v>to)? +(to /v).toFixed(4)  : +(v / to).toFixed(4);\n          var a = (p < 0.95) ? self.range/30 - (self.range/30 * p) : 0.003;\n          if(to<v){\n            \n            v -= a;\n              // Stop\n              if(v <= -to) {\n                  self.value = to\n                  if(to<=0)self.setValue(0);\n                  clearInterval(intervalOne);\n                  self.cachedValue = self.value;\n                  self.isAnimating = false;\n              }\n          }else {\n             v += a;\n              // Stop\n              if(v >= +to) {\n                  self.value = to;\n                  if(to>=100)self.setValue(100);\n                  clearInterval(intervalOne);\n                  self.cachedValue = self.value;\n                  self.isAnimating = false;\n              }\n          }\n          self.value = v;\n          this.value = v;\n      }, 10);\n  };\n  \n  changeBy(amt) {\n     this.el.targetValue = this.el.targetValue?this.el.targetValue+amt:this.el.cachedValue+amt;\n     this.animateTo(this.el.targetValue);\n  }\n  \n\n\n}","import config from \"../../../.data/client-config.json\";\nexport default (() => {\n  window.onload = e => {\n    let loginHTML = `\n<div class=\"modal fade\" id=\"login-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: block;background-color:${config.theme.overlayColor}\">\n    <div class=\"modal-dialog\">\n\t\t  <div class=\"loginmodal-container\" style=\"background-color:${config.theme.formColor}\">\n          <image id=\"logo\" src=${config.theme.logo} width=\"64px\">\n          <h3 id=\"gamename\" style=\"color:${config.theme.titleFontColor}\">${config.gameName}</h3>\n\t\t\t<div>\t  \n\t\t\t\t\t<input  placeholder=\"username\" class=\"q1\">\n          <input  placeholder=\"password\" type=\"password\" class=\"q2\"> \n          <button id=\"lb\" style=\"background-color:${config.theme.formButtonColor}\">Submit</button> \n          <div style=\"color:${config.theme.formButtonColor}\" id=\"login-msg\"></div> \n      </div>\t\t\t\t\n\n\t\t\t</div>\n\t</div>\n</div>\n`;\n    document.title = config.gameName;\n    let loginContainer = document.querySelector(\"#login\");\n    loginContainer.innerHTML = loginHTML;\n    document.querySelector(\"a-scene\").addEventListener(\"loaded\", function() {\n      document.querySelector(\".q1\").focus();\n      if (!navigator.onLine) {\n        document.getElementById(\"login-msg\").innerHTML = \"OFFLINE MODE\";\n        document.querySelector(\"#lb\").setAttribute(\"value\", \"Play Game Offline\");\n      }\n    });\n    document.getElementById(\"lb\").addEventListener(\"click\", login);\n    document.querySelector(\".q2\").addEventListener(\"keydown\", e => {\n      if (e.code == \"Enter\") login(e);\n    });\n\n    function login(e) {\n      e.preventDefault();\n      if (!(CS1 && CS1.socket.connected)) {\n        if (CS1 && !CS1.socket.connected) {\n          CS1.socket.close();\n        }\n        loginContainer.style.zIndex = -1;\n        loginContainer.setAttribute(\"hidden\", \"\");\n        CS1.myPlayer.components.player.setSpeed(0.2);\n        CS1.game.start();\n        CS1.sounds.playerJoined.play();\n        setTimeout(() => {\n          CS1.say(CS1.game.announcements.welcome);\n        }, CS1.game.welcomeDelay);\n      } else if (\n        document.querySelector(\".q1\").value.length > 0 &&\n        document.querySelector(\".q2\").value.length > 0\n      ) {\n        if (navigator.vendor.includes(\"Apple\")) {\n          CS1.sounds.playerJoined.play().catch(err => {\n            console.log(err);\n          });\n        }\n        CS1.login(\n          document.querySelector(\".q1\").value,\n          document.querySelector(\".q2\").value\n        );\n        document.querySelector(\".q1\").value = \"\";\n        document.querySelector(\".q2\").value = \"\";\n      }\n    }\n  };\n})();","export default (function cloud(){\n  \n  \nAFRAME.registerComponent('cloud', {\n  schema:{\n   color: {type:'string',default:'blue'}\n  },\n  init: function () {\n    const el = this.el;\n    el.setAttribute('material', 'shader','cloud-shader');\n    el.setAttribute('material', 'myColor', this.data.color);\n  },\n  update: function () {\n    this.el.setAttribute('material', 'myColor', this.data.color);\n  }\n});\n\n// from https://github.com/hughsk/glsl-noise/blob/master/periodic/3d.glsl\nconst pnoise3 = `\n\n//\n// GLSL textureless classic 3D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise3(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n`;\n\nAFRAME.registerShader('cloud-shader', {\n  schema: {\n    timeMsec: {type:'time', is:'uniform'},\n    myOffset: {type:'vec3', is:'uniform'},\n    myColor: {type:'color', is:'uniform', default:'pink'}\n  },\n  vertexShader: pnoise3 + `\n\n//\n// Based on @thespite's article:\n// \n// \"Vertex displacement with a noise function using GLSL and three.js\"\n// Source: https://www.clicktorelease.com/blog/vertex-displacement-noise-3d-webgl-glsl-three-js/\n//\n\nvarying float noise;\nuniform float timeMsec; // A-Frame time in milliseconds.\nuniform vec3 myOffset;\n\nfloat turbulence( vec3 p ) {\n\n  float w = 100.0;\n  float t = -.5;\n\n  for (float f = 1.0 ; f <= 10.0 ; f++ ){\n    float power = pow( 2.0, f );\n    t += abs( pnoise3( vec3( power * p ), vec3( 10.0, 10.0, 10.0 ) ) / power );\n  }\n\n  return t;\n\n}\n\nvoid main() {\n  float time = timeMsec / 1000.0; // Convert from A-Frame milliseconds to typical time in seconds.\n  noise = 10.0 *  -.10 * turbulence( .5 * normal + time / 3.0 );\n  float b = 5.0 * pnoise3( 0.05 * position, vec3( 100.0 ) );\n  float displacement = (- 10. * noise + b) / 50.0;\n\n  vec3 newPosition = position + normal * displacement + myOffset;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n}\n\n`,\n  fragmentShader: `\n\nvarying float noise;\nuniform vec3 myColor;\n\nvoid main() {\n\n  vec3 color = myColor  - vec3(2. * noise);\n  gl_FragColor = vec4( color.rgb , 1.0 );\n\n}\n\n`\n});\n\n  \n  \n  \n  \n  \n  \n  \n  \n})()","export default (function dotrow(){\n   \nAFRAME.registerComponent('dotrow', {\n  schema:{\n   change: {type:'string',default:'x'},\n   to: {type:'number',default:10}\n  },\n  init: function () {\n    \n    let changeDimension = this.data.change;\n    let to = this.data.to;\n    let elPosition = this.el.getAttribute('position');\n    let from = elPosition[changeDimension];\n    let yPosition = 1;\n    let delta = (to>from)?2:-2;\n    let cdIsX = (changeDimension=='x');\n    \n    //console.log(`preparing to add dots from ${from} to ${to} in the ${changeDimension} dimension with a delta of ${delta}.`);\n    \n    this.dots = [];\n\n    let scn = document.querySelector('a-scene');\n    \n    for(let i = from;i*(delta/2) < to*(delta/2); i += delta){\n      //console.log('adding dot...');\n      let c = document.createElement('a-sphere');\n      c.setAttribute('position',(cdIsX)?`${i} 1 ${elPosition.z}`:`${elPosition.x} 1 ${i}`);\n      c.setAttribute('shader-frog', 'name:Ova_Shader');\n      c.setAttribute('radius', '0.5');\n      c.setAttribute('collectible','affects:pointsDial;value:10;threshold:1.6')  \n      scn.appendChild(c);\n      this.dots.push(c);\n      \n    }\n    \n    this.firstInitTime = Date.now();\n    \n  },\n  update: function(){\n\n     if((Date.now()-this.firstInitTime)<5000)return;\n     console.log('updating dotrow...');\n     \n     this.dots.forEach(\n       d=>{\n         d.parentNode.removeChild(d);\n       }\n     );\n     this.init();\n  \n  }\n  \n});\n\n})()","export default(()=>{\n\nAFRAME.registerSystem('log', {\n\t  schema: {\n\t    console: {default: true}\n\t  },\n\n\t  init: function () {\n\t    var data = this.data;\n\t    var logs = this.logs = [];\n\t    var loggers = this.loggers = [];\n\n\t    // Register global function for logging.\n\t    window.CS1.log = function (message, channel) {\n\t      logs.push([message, channel]);\n\t      loggers.forEach(function (loggerComponent) {\n\t        loggerComponent.receiveLog(message, channel);\n\t      });\n\n\t      if (data.console) {\n\t        console.log('[log:' + (channel || '') + '] ' + message);\n\t      }\n\t    };\n      \n      window.CS1.socket.on('vr-log',data=>{\n        window.CS1.log(data.msg,data.channel);\n      });\n      \n      window.CS1.logall = function (message, channel){\n        window.CS1.socket.emit('logall',{msg:message,channel:channel});    \n      }\n      \n      \n\t  },\n\n\t  registerLogger: function (component) {\n\t    this.loggers.push(component);\n\t    this.logs.forEach(function (log) {\n\t      component.receiveLog.apply(component, log);\n\t    });\n\t  },\n\n\t  unregisterLogger: function (component) {\n\t    this.loggers.splice(this.loggers.indexOf(component), 1);\n\t  }\n\t});\n\n\t/**\n\t * In-VR logging using text component.\n\t */\n\tAFRAME.registerComponent('log', {\n\t  schema: {\n\t    channel: {type: 'string'},\n\t    filter: {type: 'string'},\n\t    max: {default: 100},\n\t    showErrors: {default: true}\n\t  },\n\n\t  init: function () {\n\t    this.logs = [];\n\t    this.system.registerLogger(this);\n\t  },\n\n\t  play: function () {\n\t    var self = this;\n\n\t    // Listen for `<a-scene>.emit('log')`.\n\t    this.el.sceneEl.addEventListener('log', function (evt) {\n\t      if (!evt.detail) { return; }\n\t      self.receiveLog(evt.detail.message, evt.detail.channel);\n\t    });\n\n\t    window.onerror = function (errorMsg, url, lineNumber, column, errorObj) {\n\t      self.receiveLog('Error: ' + errorMsg);\n\t    }\n\t  },\n\n\t  receiveLog: function (message, channel) {\n\t    var data = this.data;\n\n\t    // Coerce to string.\n\t    if (typeof message !== 'string') {\n\t      message = JSON.stringify(message);\n\t    }\n\n\t    // Match with ID if defined in data or event detail.\n\t    if (data.channel && channel && data.channel !== channel) { return; }\n\n\t    // Apply filter if `filter` defined.\n\t    if (data.filter && message.indexOf(data.filter) === -1) { return; }\n\n\t    // Add log.\n\t    this.logs.push(message);\n\n\t    // Truncate logs if `max` defined.\n\t    if (data.max && this.logs.length > data.max) { this.logs.shift(); }\n\n\t    // Update text. Each log gets its own line.\n\t    this.el.setAttribute('text', {value: this.logs.join('\\n')});\n      \n\t  },\n\n\t  remove: function () {\n\t    this.el.removeAttribute('text');\n\t    this.system.unregisterLogger(this);\n\t  }\n\t});\n  \n})()","export default (()=>{\n  \n  AFRAME.registerSystem('launchable', {\n  schema: {},  // System schema. Parses into `this.data`.\n\n  init: function () {\n\n    CS1.socket.on('launch-sound',name=>{\n      if(CS1.grabbables[name] && CS1.grabbables[name].components.sound__launch)\n        CS1.grabbables[name].components.sound__launch.playSound();\n    });\n    \n    CS1.socket.on('launch-complete',name=>{\n      CS1.grabbables[name].components.grabbable.isDragging = false;\n    });\n    \n  },\n\n  \n});\n  \n  AFRAME.registerComponent('launchable', {\n    schema:{\n      burst:{type:'boolean',default:true},\n      launchSound:{type:'string',default:'https://cdn.glitch.com/83b7f985-f6ce-40dd-ac98-772aff98ebbf%2Fwoosh.mp3'}\n    },\n    // will listen for the grabbable release event \n    dependencies: ['grabbable'],\n    \n    init: function () {\n      \n      this.name = this.el.components.grabbable.name;\n      console.log(`Launchable added with name: ${this.name}.`);\n      \n      let self = this;\n      \n      this.grabbable = self.el.components.grabbable;\n      \n      self.el.setAttribute('sound__launch',`src:url(${this.data.launchSound})`);\n      \n      self.el.addEventListener('grabEnd',e=>{\n        self.launch();\n      });\n      \n      \n      \n      \n         \n    },\n    \n    getDir: function(){\n     if(CS1.device == 'Oculus Quest'){\n       let d = this.grabbable.cursor.components.raycaster.raycaster.ray.direction;\n       d.x *= -1;\n       d.y *= -1;\n       d.z *= -1;\n       return d;\n     }else{\n       return this.grabbable.cursor.object3D.getWorldDirection(); \n     }\n     \n    },\n    \n    launch: function(dir){\n      CS1.socket.emit('logall',{msg:`${CS1.myPlayer.name} launched grabbable ${this.el.components.grabbable.name}!`,channel:'0'});\n      this.el.components.grabbable.isDragging = true; // can't grab while it is in launch\n      const launchData = {name:this.name,dir:(dir)?dir:this.getDir()};\n      CS1.socket.emit('launch',launchData);\n    }\n    \n    \n  });\n\n})()","export default (function launchrow(){\n   \nAFRAME.registerComponent('launchrow', {\n  schema:{\n   change: {type:'string',default:'x'},\n   to: {type:'number',default:10}\n  },\n  init: function () {\n    \n    let changeDimension = this.data.change;\n    let to = this.data.to;\n    let elPosition = this.el.getAttribute('position');\n    let from = elPosition[changeDimension];\n    let yPosition = 1;\n    let delta = (to>from)?4:-4;\n    let cdIsX = (changeDimension=='x');\n    \n    //console.log(`preparing to add dots from ${from} to ${to} in the ${changeDimension} dimension with a delta of ${delta}.`);\n    \n    this.dots = [];\n\n    let scn = document.querySelector('a-scene');\n    \n    for(let i = from;i*(delta/2) < to*(delta/2); i += delta){\n      //console.log('adding dot...');\n      let c = document.createElement('a-sphere');\n      c.setAttribute('position',(cdIsX)?`${i} 1.4 ${elPosition.z}`:`${elPosition.x} 1.4 ${i}`);\n      c.setAttribute('shader-frog', 'name:Disco_Shader');\n      c.setAttribute('radius', '1');\n      c.setAttribute('collectible','affects:energyDial;value:-10;threshold:1.6');\n      c.setAttribute('grabbable','');\n      c.setAttribute('launchable','');  \n      scn.appendChild(c);\n      this.dots.push(c);\n      \n    }\n    \n    this.firstInitTime = Date.now();\n    \n  },\n  update: function(){\n\n     if((Date.now()-this.firstInitTime)<5000)return;\n     console.log('updating dotrow...');\n     \n     this.dots.forEach(\n       d=>{\n         d.parentNode.removeChild(d);\n       }\n     );\n     this.init();\n  \n  }\n  \n});\n\n})()","import config from \"../../../../.data/client-config.json\";\nimport page1 from \"./page1.html\";\nimport page2 from \"./page2.html\";\nimport page3 from \"./page3.html\";\nimport page4 from \"./page4.html\";\n\nexport const controls = {\n  init: function() {\n    const m1 = document.querySelector(\"#menu1\");\n    const m = document.querySelector(\"#main\");\n    const m2 = document.querySelector(\"#menu2\");\n    const avatar1 = config.avatar.models[0];\n    const avatar2 = config.avatar.models[1];\n    const avatar3 = config.avatar.models[2];\n    const hiddenDiv = document.createElement('div');\n    hiddenDiv.style.display = 'None';\n    document.body.appendChild(hiddenDiv);\n    const p1 = document.createElement('span');\n    p1.innerHTML = page1;\n    hiddenDiv.appendChild(p1);\n    const p2 = document.createElement('span');\n    p2.innerHTML = page2;\n    hiddenDiv.appendChild(p2);\n    const p3 = document.createElement('span');\n    p3.innerHTML = page3;\n    hiddenDiv.appendChild(p3);\n    const p4 = document.createElement('span');\n    p4.innerHTML = page4;\n    hiddenDiv.appendChild(p4);\n    CS1.ui = {};\n    CS1.ui.controls = {};\n\n    /* \n  ___           _                     ___    _ _ _       \n | _ ) ___ __ _(_)_ _  _ _  ___ _ _  | __|__| (_) |_ ___ \n | _ \\/ -_) _` | | ' \\| ' \\/ -_) '_| | _|/ _` | |  _(_-< \n |___/\\___\\__, |_|_||_|_||_\\___|_|   |___\\__,_|_|\\__/__/ \n / __| |_ |___/_ _| |_  | || |___ _ _ ___                \n \\__ \\  _/ _` | '_|  _| | __ / -_) '_/ -_)               \n |___/\\__\\__,_|_|  \\__| |_||_\\___|_| \\___|  \n     \n    */\n\n    const box = document.createElement(\"a-box\");\n    box.setAttribute(\"scale\", \"0.7 0.7 0.7\");\n    box.object3D.visible = true;\n    box.object3D.position.set(0, 2.3, -0.25);\n    box.setAttribute(\"material\", `src:${avatar2.thumbnail}`);\n    m2.appendChild(box);\n\n    CS1.ui.controls.showBox = e => {\n      box.object3D.visible = box.object3D.visible ? false : true;\n    };\n\n    CS1.ui.controls.addBlasterBall = e => {\n      const sphere = document.createElement(\"a-sphere\");\n      sphere.setAttribute(\"color\", \"brown\");\n      sphere.setAttribute(\"collectible\", \"affects:energyDial ; value: -10\");\n      sphere.setAttribute(\"launchable\", \"\");\n      sphere.classList = \"blasterball\";\n      const pp = CS1.myPlayer.object3D.position;\n      sphere.object3D.position.set(pp.x, pp.y + 4, pp.z);\n      CS1.scene.appendChild(sphere);\n    };\n\n    CS1.ui.controls.addMagicPellet = e => {\n      const sphere = document.createElement(\"a-sphere\");\n      sphere.setAttribute(\"color\", \"purple\");\n      sphere.setAttribute(\"scale\", \"0.3 0.3 0.3\");\n      sphere.setAttribute(\"collectible\", \"affects:magicDial ; value:10; threshold:1.7\");\n      sphere.setAttribute(\"grabbable\", \"\");\n      sphere.classList = \"magicpellet\";\n      const pp = CS1.myPlayer.object3D.position;\n      sphere.object3D.position.set(pp.x, pp.y + 4, pp.z);\n      CS1.scene.appendChild(sphere);\n    };\n\n    /* \n  ___           _                     ___    _ _ _       \n | _ ) ___ __ _(_)_ _  _ _  ___ _ _  | __|__| (_) |_ ___ \n | _ \\/ -_) _` | | ' \\| ' \\/ -_) '_| | _|/ _` | |  _(_-< \n |___/\\___\\__, |_|_||_|_||_\\___|_|   |___\\__,_|_|\\__/__/ \n  ___     |___/   _  _                                   \n | __|_ _  __| | | || |___ _ _ ___                       \n | _|| ' \\/ _` | | __ / -_) '_/ -_)                      \n |___|_||_\\__,_| |_||_\\___|_| \\___|\n     \n    */\n    \n    CS1.playDMSound = true;\n    CS1.ui.controls.msgMuteToggle = e => {\n      const dmSoundControl = document.querySelector('#dm-sound-control');\n      if(dmSoundControl.innerText.includes('')){\n        dmSoundControl.innerHTML='';\n        CS1.playDMSound = false;\n      }else{\n        dmSoundControl.innerHTML='';\n        CS1.playDMSound = true;\n      }\n      \n    }\n    \n\n    function runOnce() {\n      m.setAttribute(\n        \"sound\",\n        \"src:url(https://cdn.glitch.com/36918312-2de3-4283-951d-240b263949f7%2Fclick.mp3?v=1561929149589)\"\n      );\n      document.removeEventListener(\"click\", runOnce);\n    }\n\n    document.addEventListener(\"click\", runOnce);\n    \n    const m1b1 = document.querySelector(\"#menu1-b1\");\n    if (m1b1)\n      m1b1.onclick = e => {\n        CS1.__display__stats();\n      };\n\n    const m1b2 = document.querySelector(\"#menu1-b2\");\n    if (m1b2)\n      m1b2.onclick = e => {\n        m.innerHTML = p2.innerHTML;\n      };\n\n    const m1b3 = document.querySelector(\"#menu1-b3\");\n    if (m1b3)\n      m1b3.onclick = e => {\n        m.innerHTML = p3.innerHTML;\n        const mbs = document.querySelectorAll(\".main button ,.main.imgLink\");\n        if (mbs)\n          mbs.forEach(b => {\n            CS1.ui.controls.addHoverSound(b);\n          });\n      };\n\n    const m1b4 = document.querySelector(\"#menu1-b4\");\n    if (m1b4)\n      m1b4.onclick = e => {\n        m.innerHTML = p4.innerHTML;\n      };\n    \n    const m2b1 = document.querySelector(\"#menu2-b1\");\n    if (m2b1)\n      m2b1.addEventListener(\"click\", e => {\n        e.preventDefault();\n        box.setAttribute(\"material\", `src:${avatar1.thumbnail}`);\n        CS1.socket.playerData.faceIndex = 0;\n        CS1.myPlayer._avatarType =\n          config.avatar.models[CS1.socket.playerData.faceIndex].type;\n      });\n\n    const m2b2 = document.querySelector(\"#menu2-b2\");\n    if (m2b2)\n      m2b2.addEventListener(\"click\", e => {\n        e.preventDefault();\n        box.setAttribute(\"material\", `src:${avatar2.thumbnail}`);\n        CS1.socket.playerData.faceIndex = 1;\n        CS1.myPlayer._avatarType =\n          config.avatar.models[CS1.socket.playerData.faceIndex].type;\n      });\n\n    const m2b3 = document.querySelector(\"#menu2-b3\");\n    if (m2b3)\n      m2b3.addEventListener(\"click\", e => {\n        e.preventDefault();\n        box.setAttribute(\"material\", `src:${avatar3.thumbnail}`);\n        CS1.socket.playerData.faceIndex = 2;\n        CS1.myPlayer._avatarType =\n          config.avatar.models[CS1.socket.playerData.faceIndex].type;\n      });\n    \n    const m2b1img = document.querySelector('#m2-b1-img');\n    const m2b1name = document.querySelector('#m2-b1-name');\n    const m2b2img = document.querySelector('#m2-b2-img');\n    const m2b2name = document.querySelector('#m2-b2-name');\n    const m2b3img = document.querySelector('#m2-b3-img');\n    const m2b3name = document.querySelector('#m2-b3-name');\n    \n    m2b1img.src = avatar1.thumbnail;\n    m2b2img.src = avatar2.thumbnail;\n    m2b3img.src = avatar3.thumbnail;\n    \n    m2b1name.innerHTML = avatar1.name;\n    m2b2name.innerHTML = avatar2.name;\n    m2b3name.innerHTML = avatar3.name;\n\n\n    CS1.ui.controls.addHoverSound = b => {\n      b.addEventListener(\"mouseenter\", e => {\n        if (CS1.stats.container.getAttribute(\"visible\") && m.components.sound)\n          m.components.sound.playSound();\n      });\n    };\n    const mbs = document.querySelectorAll(\".menu button , .imgLink\");\n    if (mbs)\n      mbs.forEach(b => {\n        CS1.ui.controls.addHoverSound(b);\n      });\n  }\n};","import config from \"../../../../.data/client-config.json\";\nimport styles from './styles.html';\nimport panels from './panels.html';\nimport {controls} from './controls';\n\nexport default(()=>{\n\nAFRAME.registerSystem('vrui', {\n  schema: {\n\t  panels: {default: 3}\n  },\n  \n  dependencies: ['htmlembed'],\n  \n  init: ()=>{\n     \n    \n    \n    document.head.innerHTML += styles;\n    \n    const ec = document.createElement('a-entity');\n    ec.setAttribute('style','visibility:hidden');\n    ec.setAttribute('vrui','');\n    ec.id = 'embed-container';\n    ec.innerHTML = panels;\n    ec.setAttribute('scale',`${config.vrui.scale} ${config.vrui.scale} ${config.vrui.scale}`);\n    let scn = document.querySelector('a-scene');\n    scn.appendChild(ec);\n        \n    \n    document.addEventListener('gameStart',e=>{\n      \n      const w = document.createElement('div');\n      w.style.width = '100%';\n      w.style.height = '100%';\n      w.appendChild(CS1.stats.container);\n     \n      \n    CS1.__display__stats = function(){\n      const c = document.querySelector('#main');\n      c.innerHTML='';\n      c.appendChild(w); \n    }\n    \n    \n   document.querySelector('#main').appendChild(w);  \n      \n    let scn = document.querySelector('a-scene');\n    let ctr = document.querySelector('#embed-container');\n    ctr.setAttribute('visible',false);\n    ctr.setAttribute('position',config.vrui.offset);\n    CS1.myPlayer.add(ctr);\n    CS1.stats.container = ctr;\n    let m = document.querySelector('#main');\n    let m1 = document.querySelector('#menu1');\n    let m2 = document.querySelector('#menu2');\n    m.setAttribute('htmlembed','');\n    m1.setAttribute('htmlembed','');\n    m2.setAttribute('htmlembed','');\n\n\n   controls.init();\n      \n      \n    document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })  \n      \n    \n    let lh = CS1.myPlayer.components.player.lh.components[\"oculus-touch-controls\"];\n    let rh = CS1.myPlayer.components.player.rh.components[\"oculus-touch-controls\"];\n    if(CS1.device==\"Oculus Quest\"){\n       //AFRAME.utils.device.checkHeadsetConnected()\n      \n        let cursor = document.querySelector('a-cursor');\n        cursor.pause();\n        if(CS1.cam.components.raycaster)CS1.cam.components.raycaster.pause();\n          lh.el.addEventListener('abuttondown',e=>{\n            CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = CS1.stats.container.getAttribute('visible');\n            CS1.stats.container.setAttribute('visible',!v);\n            if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n          });\n          rh.el.addEventListener('abuttondown',e=>{\n            CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = CS1.stats.container.getAttribute('visible');\n            CS1.stats.container.setAttribute('visible',!v); \n            if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n          });   \n    } else if(CS1.device==\"Standard\") {\n      \n      document.addEventListener('keypress',e=>{\n          if(e.code=='Backquote'){\n            CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = CS1.stats.container.getAttribute('visible');\n            CS1.stats.container.setAttribute('visible',!v);\n            if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n          }\n        });       \n          \n    } else if(CS1.device==\"Mobile\"){\n      \n      \n      document.addEventListener('doubleTapMenu',e=>{\n        CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n        let v = CS1.stats.container.getAttribute('visible');\n        CS1.stats.container.setAttribute('visible',!v);\n        if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n        \n      });\n      \n      \n    }  \n      \n      \n      \n    });\n    \n       \n    \n  },\n\n  \n  \n  \n});\n  \n})()","export default(()=>{\n\nAFRAME.registerComponent('chat', {\n  schema: {\n\t  inputColor: {default: '#fff'},\n    keyboardColor: {default: '#fff'},\n    highlightColor: {default: '#1a79dc'}\n  },\n  \n  dependencies: ['aframe-keyboard'],\n  \n  init: function(){\n    \n    CS1.socket.on('dm', d=>{\n    \n      CS1.log(`${d.name} - ${d.msg}`);\n      const m = document.createElement('li');\n      m.innerHTML=`<font color=${CS1.utils.toColor(CS1.utils.stringToInt(d.name))}>${d.name}</font> - ${d.msg}`;\n      document.querySelector('#messages').appendChild(m);\n      if(CS1.playDMSound)CS1.sounds.tada.play();\n    \n    });\n    \n    \n    CS1.socket.on('msg',data=>{\n      \n      if(CS1.game.hasBegun){\n        CS1.__setPlayerMessage(data);\n      }\n       \n    });\n    \n    \n    \n    this.container = document.createElement('a-entity');\n    this.container.setAttribute('visible',false);\n    \n    this.input = document.createElement('a-text');\n    this.input.setAttribute('font','dejavu');\n    this.input.setAttribute('color',this.data.inputColor);\n    this.input.setAttribute('value','Enter message ...');\n    this.input.setAttribute('scale','0.7 0.7 0.7');\n    this.input.setAttribute('rotation','-20 0 0');\n    this.input.setAttribute('position','-0.5 1.9 -1.5');\n    \n    this.keyboard = document.createElement('a-entity');\n    this.keyboard.setAttribute('a-keyboard','dismissable:false');\n    this.keyboard.setAttribute('position','-1 1.6 -1.5');\n    this.keyboard.setAttribute('rotation','-20 0 0');\n    this.keyboard.setAttribute('scale','4 4 4');\n    \n   \n    this.container.appendChild(this.input);\n    this.container.appendChild(this.keyboard);\n    this.el.appendChild(this.container);\n    \n    \n    \n    const self = this;\n    \n    document.addEventListener('gameStart',e=>{\n      \n      self.normalKeys = document.querySelectorAll('.collidable');\n          \n      document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            \n        \n      const dummy = document.querySelector('#standard-chat-dummy');\n      \n      self.value = '';\n      \n      function submit(){\n        self.input.setAttribute('value', self.value);\n            self.container.setAttribute('visible',false);\n            document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                }) \n            self.keyboard.components['a-keyboard'].pause();\n            document.removeEventListener('a-keyboard-update', updateInput);\n            if(self.value.startsWith('@')){\n               const name = self.value.substring(1 , self.value.indexOf(' '));\n               const msg = self.value.substring(self.value.indexOf(' ')+1 , self.value.length);\n               CS1.socket.emit('dm',{msg:msg,name:name});\n               return;\n            }\n            CS1.socket.emit('msg',{msg:self.value});\n            dummy.blur(); \n      }\n      \n      function updateInput(e){\n        let code = parseInt(e.detail.code)\n        switch(code) {\n          case 8:\n            self.value = self.value.slice(0, -1)\n            break\n          case 999:\n            submit();\n            return\n          case 13:\n            submit();\n            return \n          default:\n            if(!e.detail.value)return;\n            if(e.detail.code==40)e.detail.value='\\n';\n            self.value = self.value + e.detail.value;\n            break\n          }\n          self.input.setAttribute('value', self.value + '_')\n      }\n      \n      \n      function submitQuest(){\n        self.input.setAttribute('value', self.value);\n            self.container.setAttribute('visible',false);\n            document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            self.keyboard.components['a-keyboard'].pause();\n            document.removeEventListener('a-keyboard-update', updateInputQuest)\n            if(self.value.startsWith('@')){\n               const name = self.value.substring(1 , self.value.indexOf(' ')-1);\n               const msg = self.value.substring(self.value.indexOf(' ')+1 , self.value.length-1);\n               CS1.socket.emit('dm',{msg:msg,name:name});\n               return;\n            }\n            CS1.socket.emit('msg',{msg:self.value});\n      }\n      \n      \n      function updateInputQuest(e){\n        let code = parseInt(e.detail.code)\n        switch(code) {\n          case 8:\n            self.value = self.value.slice(0, -1)\n            break\n          case 999:\n            submitQuest();\n            return\n          default:\n            if(!e.detail.value)return;\n            if(e.detail.code==40)e.detail.value='\\n';\n            self.value = self.value + e.detail.value\n            break\n          }\n          self.input.setAttribute('value', self.value + '_')\n      }\n      \n      let lh = CS1.myPlayer.components.player.lh.components[\"oculus-touch-controls\"];\n      let rh = CS1.myPlayer.components.player.rh.components[\"oculus-touch-controls\"];\n      \n      switch(CS1.device){\n          \n        case \"Oculus Quest\":\n          \n          let cursor = document.querySelector('a-cursor');\n          cursor.pause();\n          if(CS1.cam.components.raycaster)CS1.cam.components.raycaster.pause();\n          lh.el.addEventListener('bbuttondown',e=>{\n            self.value = '';\n            self.input.setAttribute('value', self.value);\n            document.addEventListener('a-keyboard-update', updateInputQuest)\n            self.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = self.container.getAttribute('visible');\n            self.container.setAttribute('visible',!v);\n            self.keyboard.components['a-keyboard'].play();\n            if(v){\n               document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            }else{\n              self.keys.forEach(e=>{\n                 e.classList.add('collidable')\n                }) \n            }\n          });\n          rh.el.addEventListener('bbuttondown',e=>{\n            self.value = '';\n            self.input.setAttribute('value', self.value);\n            document.addEventListener('a-keyboard-update', updateInputQuest)\n            self.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = self.container.getAttribute('visible');\n            self.container.setAttribute('visible',!v);\n            self.keyboard.components['a-keyboard'].play();\n            if(v){\n               document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            }else{\n              AFK.template.toggleActiveMode('normal');\n            }\n          });  \n          \n          \n          \n          break;\n        case \"Mobile\":\n          CS1.chatInput = document.querySelector('#mobile-chat-input');\n          CS1.chatInput.style.position = 'absolute';\n          CS1.chatInput.style.top = '10px';\n          CS1.chatInput.style.margin = '0 auto';\n          \n          CS1.chatInput.addEventListener('keydown',e=>{\n            switch(e.keyCode){\n              case 13:\n                if(CS1.chatInput.value.startsWith('@')){\n                   const name = CS1.chatInput.value.substring(1 , CS1.chatInput.value.indexOf(' ')-1);\n                   const msg = CS1.chatInput.value.substring(CS1.chatInput.value.indexOf(' ')+1 , CS1.chatInput.value.length-1);\n                   CS1.socket.emit('dm',{msg:msg,name:name});\n                   return;\n                }\n                CS1.socket.emit('msg',{msg:CS1.chatInput.value});\n                CS1.chatInput.style.zIndex = -1000;\n                CS1.chatInput.style.top = '-100px';\n                CS1.chatInput.blur();\n                break;\n            }\n          });\n          document.addEventListener('doubleTapChat',e=>{\n            \n            if(CS1.chatInput.style.zIndex == -1000){\n              CS1.chatInput.style.zIndex = 200;\n              CS1.chatInput.style.top = '10px';\n            }else{\n              CS1.chatInput.style.zIndex = -1000;\n              CS1.chatInput.style.top = '-100px';\n            }\n\n            \n\n          });\n          \n          break;\n        case \"Standard\":\n          document.querySelector('#mobile-chat-input').setAttribute('style','position:absolute;top:-1000px');\n          const dummy = document.querySelector('#standard-chat-dummy');\n          document.addEventListener('keypress',e=>{\n            if(e.keyCode==61){\n              self.value = '';\n              self.input.setAttribute('value', self.value);\n              document.addEventListener('a-keyboard-update', updateInput)\n              self.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n              let v = self.container.getAttribute('visible');\n              self.container.setAttribute('visible',!v); \n              self.keyboard.components['a-keyboard'].play();\n              if(v){\n               document.querySelectorAll('.collidable').forEach(e=>{\n                 dummy.blur();\n                 e.classList.remove('collidable');\n                })  \n            }else{\n              AFK.template.toggleActiveMode('normal');\n              self.normalKeys.forEach(e=>{\n                 dummy.focus();\n                 e.classList.add('collidable');\n                })  \n            }\n            }\n          });     \n          break;\n          \n      }\n      \n      \n    });\n    \n    \n    \n  },\n  \n \n  \n  \n});\n  \n})()","export default(()=>{\n\nAFRAME.registerComponent('cs1-jukebox', {\n  schema: {\n\t\n  },\n  \n  init: function(){\n    CS1.jukebox.audio.addEventListener('jukeboxplay',e=>{\n      CS1.socket.emit('jukebox',{action:'play',index:e.detail.index,player:CS1.myPlayer.name});\n      CS1.log(`${CS1.myPlayer.name} is playing ${CS1.jukebox.songNames[e.detail.index]}.`);\n    });\n    CS1.jukebox.audio.addEventListener('jukeboxpause',e=>{\n      CS1.socket.emit('jukebox',{action:'pause',player:CS1.myPlayer.name});\n      CS1.log(`${CS1.myPlayer.name} has paused the jukebox.`);\n    }); \n    CS1.socket.on('jukebox',data=>{\n      if(data.player==CS1.myPlayer.name)return;\n      switch(data.action){\n        case 'play':\n          CS1.jukebox.play(data.index);\n          CS1.log(`${data.player} is playing ${CS1.jukebox.songNames[data.index]}!`);\n          break;\n        case 'pause':\n          CS1.jukebox.pause(false);\n          CS1.log(`${data.player} has paused the jukebox!`);\n          break;\n      }\n    });\n  }\n});\n  \n})()","export default(()=>{\n  \n\nAFRAME.registerComponent('jump', {\n  schema: {\n    speed: {default: 8},\n    g: {default: -9.8}\n  },\n  \n  init: function(){\n    this.el.isJumping = false;\n    this.forwardVelocity = -this.data.speed;\n    this.verticalVelocity = 0;\n    this.jumpEvent = new Event('jump');\n    this.landEvent = new Event('land');\n    this.jumpDirection = new THREE.Vector3();\n    switch(CS1.device){\n      case 'Oculus Quest':\n        const lh = CS1.myPlayer.components.player.lh.components[\"oculus-touch-controls\"];\n        if(AFRAME.utils.device.checkHeadsetConnected()){\n          lh.el.addEventListener('xbuttondown',e=>{\n             this.jump();\n          });\n        }\n        break;\n      case 'Standard':\n        document.addEventListener('keydown', e=>{\n          if(e.code=='Space' && !this.el.isJumping){\n            this.jump();\n          }\n        });\n        break;\n      case 'Mobile':\n        document.body.addEventListener(\"touchstart\", e => {\n              let now = new Date().getTime();\n              let timesince = now - this.lastJumpTap;\n\n              if (timesince < 300 && \n                  timesince > 0  &&\n                  e.changedTouches[0].pageY > window.innerHeight/2) {\n                // double tap\n                this.jump();\n     \n              } else {\n                // too much time to be a doubletap\n              }\n              this.lastJumpTap = new Date().getTime();\n            });\n        break;\n    }\n    \n  },\n  \n  tick: function(t,dt){\n    if(this.el.isJumping){\n      this.verticalVelocity+=this.data.g*dt/1000;\n      this.el.object3D.position.addScaledVector(this.jumpDirection,this.forwardVelocity*dt/1500);\n      this.el.object3D.translateY(this.verticalVelocity*dt/1000);\n      if(this.verticalVelocity<0 && this.el.object3D.position.y<=0){\n        this.land();\n      }\n    }\n  },\n  \n  jump: function(s){\n    this.el.components['movement-controls'].pause();\n    this.el.isJumping = true;\n    CS1.cam.object3D.getWorldDirection(this.jumpDirection);\n    this.jumpDirection.y = (this.jumpDirection.y>=0)?-0.02:this.jumpDirection.y;\n    this.jumpDirection.x /= 2;\n    this.jumpDirection.z /= 2;\n    this.verticalVelocity = s?s:this.data.speed;\n    this.el.dispatchEvent(this.jumpEvent);\n  },\n  \n  land: function(){\n    this.el.isJumping = false;\n    this.verticalVelocity = 0;\n    this.el.object3D.position.y = 0;\n    this.el.components['movement-controls'].play();\n    this.el.dispatchEvent(this.landEvent);  \n  }\n  \n});\n  \n})()","export default(()=>{\n\n    function fancySphere(offset='0 0 0',shaderName='Thruster_Shader',radius=0.4) {\n        const t = document.createElement(\"a-sphere\");\n        t.setAttribute(\"radius\", radius);\n        t.setAttribute(\"position\", offset);\n        t.setAttribute(\"shader-frog\", `name:${shaderName}`);\n        return t;\n      }\n\n    function startTestRoomSound(){\n        CS1.testRoomSound = document.createElement('a-sound');\n        CS1.testRoomSound.object3D.position.set(-12.8,-0.27,-17.85);\n        CS1.testRoomSound.setAttribute('src','https://cdn.glitch.com/d50f3652-d9fb-43fb-9fb4-8384900611e6%2Ftest_room.mp3?v=1577131969574');\n        CS1.testRoomSound.setAttribute('volume',1);\n        CS1.testRoomSound.setAttribute('loop',true);\n        CS1.testRoomSound.setAttribute('distanceModel','exponential');\n        CS1.scene.appendChild(CS1.testRoomSound);\n        setTimeout(_=>{\n            CS1.testRoomSound.components.sound.playSound();\n        },2000);  \n    }\n      \n    document.addEventListener('gameStart',e=>{\n      \n      CS1.shaderfrog.Thruster_Shader.uniforms.backgroundColor.value.r = \"0.4\";\n      CS1.shaderfrog.Thruster_Shader.uniforms.backgroundColor.value.g = \"0.1\";\n      CS1.shaderfrog.Thruster_Shader.uniforms.backgroundColor.value.b = \"0.2\";\n      \n      CS1.scene.appendChild(fancySphere(\"-20.75 2.52 -21.4\"));\n      CS1.scene.appendChild(fancySphere(\"-16.9 2.52 -21.4\"));\n      CS1.scene.appendChild(fancySphere(\"-9.21 2.52 -21.4\"));\n      CS1.scene.appendChild(fancySphere(\"-5.54 2.52 -21.4\"));\n      \n      CS1.scene.appendChild(fancySphere(\"-20.75 2.52 -14.36\"));\n      CS1.scene.appendChild(fancySphere(\"-16.9 2.52 -14.36\"));\n      CS1.scene.appendChild(fancySphere(\"-9.21 2.52 -14.36\"));\n      CS1.scene.appendChild(fancySphere(\"-5.54 2.52 -14.36\"));\n      \n      CS1.scene.appendChild(fancySphere(\"10.75 5.6 -23.52\",\"Sun_Shader\"));\n      CS1.scene.appendChild(fancySphere(\"10.75 5.6 -23.52\",\"Electric_Shader\",0.65));\n        \n      CS1.scene.appendChild(fancySphere(\"5.875 5.35 -9.536\",\"Sun_Shader\",0.246));\n      CS1.scene.appendChild(fancySphere(\"5.875 5.35 -9.536\",\"Electric_Shader\",0.4));\n      \n      CS1.scene.appendChild(fancySphere(\"8.361 5.562 -9.3\",\"Ova_Shader\",0.5));\n      CS1.scene.appendChild(fancySphere(\"3.368 5.562 -9.3\",\"Ova_Shader\",0.5));\n      \n      const barrier1 = document.createElement('a-barrier','along:z');\n      barrier1.setAttribute('position','-4.7 -4.4 4.4');\n      barrier1.addEventListener('barrier-burn', e=>{\n        console.error('BARRIER BURN!');\n        CS1.stats.energyDial.changeBy(-10);\n      });\n      barrier1.addEventListener('barrier-deactivated', e=>{\n        console.log('BARRIER DEACTIVATED!');\n        startTestRoomSound();\n      });\n      CS1.scene.appendChild(barrier1);\n         \n    }); \n      \n    AFRAME.registerSystem('barrier', {\n     \n      \n      bar: function(along){\n      \n        const bar = document.createElement('a-cylinder');\n        bar.setAttribute('height',3);\n        bar.setAttribute('radius',0.16);\n        bar.setAttribute('shader-frog','name:Force_Field_Shader');\n        if(along=='x')\n          bar.object3D.rotation.z = Math.PI/2;\n        else\n          bar.object3D.rotation.x = Math.PI/2;\n        return bar;\n      \n      }\n      \n      \n      \n    });\n    \n    AFRAME.registerComponent('barrier', {\n      schema: {\n        along: {default: 'x'},\n        bars: {default: 5},\n        bottom: {default: 0.2},\n        spread: {default: 0.9},\n        autoplay: {default:true}\n      },\n      \n      init: function(){\n    \n        this.playerSpeed = CS1.myPlayer.components.player.data.speed;\n        this.spawnPosition = `${CS1.myPlayer.object3D.position.x} ${CS1.myPlayer.object3D.position.y} ${CS1.myPlayer.object3D.position.z}`;\n        this.lastD = 1;\n        this.barrierBurnEvent = new Event('barrier-burn');\n        this.barrierDeactivatedEvent = new Event('barrier-deactivated');\n        this.numShocks = 0;\n        this.messages = ['You will only get hurt trying to force yourself through the barrier.',\n                         'Oh... you do not like to listen do you.',\n                         'It is time for you to take an intelligent approach.',\n                         'You cannot expect different results with the same lame approach',\n                         'Open the menu with the backquote key, below the escape key on a keyboard device.',\n                         'Open the menu with the A button on an Oculus Quest.',\n                         'Open the menu with the menu button at the top right of the screen on mobile.'];\n        this.warnings = 0;\n        this.isDeactivated = false;\n        this.checkSolutionInterval = setInterval(_=>{\n            const mps = document.querySelectorAll('.magicpellet');\n            mps.forEach(mp=>{\n                if(mp.object3D.position.distanceTo(this.el.object3D.position)<1){\n                    this.deactivate();\n                }\n            });\n        },1000);\n        \n        for(let i=0; i<this.data.bars; i++){\n          const bar = this.system.bar('z');\n          bar.object3D.position.y = this.data.bottom + (i*this.data.spread);\n          this.el.appendChild(bar)\n        }\n        \n    \n        \n        \n        if(this.data.autoplay){\n        \n          const runOnce = e=>{\n            this.el.components.sound.play();\n            document.removeEventListener('click', runOnce);\n          }\n    \n          document.addEventListener('click', runOnce);\n    \n    \n        }\n        \n        \n        CS1.log('\\nA well placed Magic Pellet will earn you your freedom.\\n')\n        \n      },\n    \n      tick: function(t,dt){\n          if(this.isDeactivated)return;\n          const d = CS1.myPlayer.object3D.position.distanceTo(this.el.object3D.position);\n          if(d<1 && this.lastD>d){\n            if(this.numShocks>3){\n              this.el.components.sound__blast.playSound();\n              CS1.myPlayer.setAttribute('position',this.spawnPosition);\n              CS1.myPlayer.components['movement-controls'].pause();\n              CS1.say(this.messages[this.warnings%this.messages.length]);\n              this.warnings++;\n              this.numShocks = 0;\n              setTimeout(_=>{\n                CS1.myPlayer.components['movement-controls'].play();\n              },5000);\n            }\n            else\n              CS1.myPlayer.components.player.setSpeed(d/4000);\n            if(Math.random()<0.3){\n              this.el.dispatchEvent(this.barrierBurnEvent);\n              this.el.components.sound__shock.playSound();\n              this.numShocks++;\n            } \n            \n          }else{\n            CS1.myPlayer.components.player.setSpeed(this.playerSpeed);\n          }\n          this.lastD = d;\n      },\n\n      deactivate: function(){\n        clearInterval(this.checkSolutionInterval);\n        this.el.setAttribute('visible',false);\n        this.el.components.sound.pauseSound();\n        this.isDeactivated = true;\n        this.el.components.sound__victory.playSound();\n        this.el.dispatchEvent(this.barrierDeactivatedEvent);\n      }\n      \n      \n      \n    });\n      \n    AFRAME.registerPrimitive('a-barrier', {\n    \n    defaultComponents: {\n      \n        barrier: {},\n        position: {},\n        sound: {\n          src:'https://cdn.glitch.com/d50f3652-d9fb-43fb-9fb4-8384900611e6%2Fforce_field.mp3?v=1577118560391',\n          loop:true,\n          autoplay:true\n        },\n        sound__shock: {\n          src: 'https://cdn.glitch.com/d50f3652-d9fb-43fb-9fb4-8384900611e6%2Felectric_shock.mp3?v=1577121795379'\n        },\n        sound__blast: {\n          src: 'https://cdn.glitch.com/d50f3652-d9fb-43fb-9fb4-8384900611e6%2Fblast.mp3?v=1577128885665'\n        },\n        sound__victory: {\n          src: 'https://cdn.glitch.com/d50f3652-d9fb-43fb-9fb4-8384900611e6%2Fvictory.mp3?v=1577131016695'\n        }\n      \n      },\n      \n      mappings: {\n      \n       along : 'barrier.along',\n       bars : 'barrier.bars',\n       bottom: 'barrier.bottom',\n       spread: 'barrier.spread',\n       snd: 'sound.src',\n       loop: 'sound.loop',\n       autoplay: 'sound.autoplay',\n       shock: 'sound__shock.src',\n       blast: 'sound__blast.src',\n       victory: 'sound__victory'\n      \n      }\n    \n    });\n      \n      \n    })()","let CS1 = window.CS1 = {};\nimport utils from './core/utils/utils';\nutils(CS1);\nimport loadSpinner from './core/load/load-spinner';\nimport './core/load/load-spinner.css';\nimport grabbable from './core/components/grabbable';\nimport navpointer from './core/components/nav-pointer';\nimport weatherviz from './core/components/weather-viz';\nimport shaderfrog from './core/components/shaderfrog/shader-frog';\nshaderfrog(CS1);\nimport proximityGlitch from './demo/components/proximity-glitch'\nproximityGlitch(CS1);\nimport stats from './stats/stats';\nimport './stats/stats.css';\nstats(CS1);\nimport game from './core/components/game';\ngame(CS1);\nimport player from './core/components/player';\nplayer(CS1);\nimport {bgmlite} from './core/services/bgm';\nbgmlite(CS1);\nimport socket from './core/socket/client-socket';\nsocket(CS1);\nimport collectible from './core/components/collectible';\ncollectible(CS1);\nimport './main.css';\nimport login from './core/login/login';\nimport './core/login/login.css';\nimport cloud from './demo/components/cloud';\nimport npc from './demo/components/npc';\nnpc(CS1);\nimport dotrow from './demo/components/dotrow';\nimport userdata from './core/components/userdata';\nuserdata(CS1);\nimport iotAPI from './demo/components/iot-api';\niotAPI(CS1);\nimport log from './core/components/log';\nimport launchable from './core/components/launchable';\nimport launchrow from './demo/components/launchrow';\nimport vrui from './core/components/vrui/vrui';\nimport chat from './core/components/chat';\nimport cs1Jukebox from './core/components/cs1-jukebox';\nimport jump from './core/components/jump';\nimport mycomponents from './core/components/my-components';\n\n//supress console.warn\nwindow.console.warn = function(){};\n\n\n  \n\n  ","export default CS1=>{\n  CS1.utils = {\n    uid: (()=>{\n        const firstItem = {\n            value: \"0\"\n        };\n        /*length can be increased for lists with more items.*/\n        let counter = \"123456789\".split('')\n            .reduce((acc, curValue, curIndex, arr) => {\n                const curObj = {};\n                curObj.value = curValue;\n                curObj.prev = acc;\n\n                return curObj;\n            }, firstItem);\n        firstItem.prev = counter;\n\n        return function () {\n            let now = Date.now();\n            if (typeof performance === \"object\" && typeof performance.now === \"function\") {\n                now = performance.now().toString().replace('.', '');\n            }\n            counter = counter.prev;\n            return `${now}${Math.random().toString(16).substr(2)}${counter.value}`;\n        }\n    })(),\n    \n    isEqual : function (value, other) {\n      \n      function compare(item1, item2) {\n\n        // Get the object type\n        var itemType = Object.prototype.toString.call(item1);\n\n        // If the two items are not the same type, return false\n        if (itemType !== Object.prototype.toString.call(item2)) return false;\n\n        // If it's a function, convert to a string and compare\n        // Otherwise, just compare\n        if (itemType === '[object Function]') {\n          if (item1.toString() !== item2.toString()) return false;\n        } else {\n          if (item1 !== item2) return false;\n        }\n      }\n      \n\n      // ...\n\n      // Compare properties\n      for (var key in value) {\n        if (value.hasOwnProperty(key)) {\n            if (compare(value[key], other[key]) === false) return false;\n        }\n      }\n\n      // If nothing failed, return true\n      return true;\n\n    },\n    \n    toColor: function (num) {\n          num >>>= 0;\n          var b = num & 0xFF,\n              g = (num & 0xFF00) >>> 8,\n              r = (num & 0xFF0000) >>> 16,\n              a = ( (num & 0xFF000000) >>> 24 ) / 255 ;\n          return \"rgba(\" + [r, g, b, a].join(\",\") + \")\";\n      },\n    \n    randomFromArray: function (array) {\n      if(array.length>0){\n        return array[Math.floor(Math.random()*array.length)];\n      }else{\n        return false;\n      }\n    },\n    \n    stringToInt: function(str) {\n      var hash = 0;\n      for (var i = 0; i < str.length; i++) {\n         hash = str.charCodeAt(i) + ((hash << 5) - hash);\n      }\n      return hash;\n    } \n       \n\n  }\n}","export default CS1=>{\n\n AFRAME.registerComponent('proximity-glitch', {\n   schema: {\n     threshold: {type: 'number', default: 2},\n     affects: {type: 'string', default: ''},\n     value:{type:'number',default:-0.1},\n     sound: {type: 'string',default:'https://cdn.glitch.com/6b222f93-e194-41e2-aaf6-59e5af64658d%2Fbuzz.mp3?1555284089077'},\n   },\n   init: function () {\n      this.sound = document.createElement('a-sound');\n      this.sound.setAttribute('src',`url(${this.data.sound})`);\n      this.el.appendChild(this.sound);\n      this.soundIsPlaying=false;\n      this.sound.addEventListener('sound-ended',e=>{\n        this.soundIsPlaying=false;     \n      });\n      this.scene=document.querySelector('a-scene');\n      this.scene.setAttribute('glitch','');\n      this.baseEffects=this.scene.getAttribute('effects');\n    },\n   tick: function (t,dt) {\n     if(CS1.game.playerDistanceTo(this.el)<this.data.threshold){  \n       this.scene.setAttribute('effects',`glitch,${this.baseEffects}`);\n       if(this.data.affects){\n         CS1.hud[this.data.affects].setValue(CS1.hud[this.data.affects].value+this.data.value);\n         if(!this.soundIsPlaying){\n           this.sound.components.sound.playSound();\n           this.soundIsPlaying = true;\n         }\n       }\n     }else{\n       this.scene.setAttribute('effects',this.baseEffects);\n     }\n   }\n  });\n\n}","let config = {\n  regions:{\n    top:true,\n    left:false,\n    right:false,\n    bottom:false\n  }\n}\n\nimport RingDial from './elements/ring-dial';\nimport Meter from './elements/meter';\n\nexport default CS1=>{\n\n  window.addEventListener('load', function () {\n    CS1.stats = {};\n    let statsElement = document.createElement('div');\n    statsElement.id = 'vr-stats';\n    CS1.stats.container = statsElement;\n    if(!statsElement)return;\n    let containers = generateRegions(statsElement);\n    containers.top.style.pointerEvents='none';\n    CS1.stats.pointsDial = new RingDial({\n        container: containers.top,\n        labelText: 'points',\n        labelColor: '#ccc',\n        gradientColor1: 'white',\n        gradientColor2: 'red',\n        max: 1000                     \n    });\n    CS1.stats.energyDial = new RingDial({\n        container: containers.top,\n        labelText: 'energy',\n        labelColor: '#ccc',\n        gradientColor1: 'white',\n        gradientColor2: 'lime',\n        max: 1000\n    });\n    CS1.stats.energyDial.setValue(500);\n    CS1.stats.magicDial = new RingDial({\n        container: containers.top,\n        labelText: 'magic',\n        labelColor: '#ccc',\n        gradientColor1: 'white',\n        gradientColor2: '#b45ef9',\n        suffix: '%',\n        max: 100                     \n    });\n    CS1.stats.oxygenMeter = new Meter(containers.top,'oxygen','#ccc',1.0);\n  \n  function generateRegions(statsElement){\n   let containers = {};\n   if(config.regions.top){\n     let top = document.createElement('div');\n     top.id = 'stats-top';\n     top.style.position = 'relative';\n     top.style.left = '0px';\n     top.style.top = '0px';\n     top.style.width = 2000 + 'px';\n     top.style.height = 2000/4 + 'px';\n     containers.top = top;\n     statsElement.appendChild(top);\n   }\n   if(config.regions.left){\n   \n   }\n   if(config.regions.right){\n   \n   }\n   if(config.regions.bottom){\n     let bottom = document.createElement('div');\n     bottom.id = 'stats-bottom';\n     bottom.style.position = 'absolute';\n     bottom.style.left = '0px';\n     bottom.style.top = 900 - 2000/8 + 'px';\n     bottom.style.width = 2000 + 'px';\n     bottom.style.height = 2000/8 + 'px';\n     containers.bottom = bottom;\n     statsElement.appendChild(bottom);\n   }\n   return containers;\n  }\n  \n  })\n  \n}\n","import config from \"../../../.data/client-config.json\";\nexport default CS1 => {\n  AFRAME.registerComponent(\"game\", {\n    schema: { mode: { type: \"string\", default: \"standard\" } },\n    init: function() {\n      CS1.game = this;\n      this.isRunning = false;\n      this.hasBegun = false;\n\n      CS1.callbacks = {};\n\n      this.determineDevice();\n\n      this.name = config.gameName;\n      this.announcements = {};\n      this.announcements[\"welcome\"] = config.welcomeMsg;\n      this.welcomeDelay = config.voice.welcomeDelay;\n\n      document.querySelector(\"#scene-container\").style.display = \"block\";\n      document.querySelector(\"#loading-screen\").style.display = \"none\";\n\n      CS1.voices = window.speechSynthesis.getVoices();\n\n      CS1.say = function(msg, name = \"none given\") {\n        var msg = new SpeechSynthesisUtterance(msg);\n        if (name == \"none given\")\n          msg.voice = speechSynthesis.getVoices().filter(function(voice) {\n            return voice.name == config.voice.name;\n          })[0];\n        else\n          msg.voice = speechSynthesis.getVoices().filter(function(voice) {\n            return voice.name == name;\n          })[0];\n        msg.pitch = config.voice.pitch;\n        msg.rate = config.voice.rate;\n        msg.volume = config.voice.volume;\n        speechSynthesis.speak(msg);\n      };\n\n      CS1.sayall = function(msg, name) {\n        CS1.socket.emit(\"sayall\", { msg: msg, name: name });\n      };\n\n      CS1.printVoices = () => {\n        speechSynthesis.getVoices().forEach(v => {\n          console.log(v.name, v.lang);\n        });\n      };\n\n      CS1.sounds = {};\n\n      Object.keys(config.sounds).forEach(soundName => {\n        CS1.sounds[soundName] = new Audio(config.sounds[soundName].url);\n        CS1.sounds[soundName].loop = config.sounds[soundName].loop || false;\n        CS1.sounds[soundName].volume = config.sounds[soundName].volume || 1;\n      });\n\n      CS1.scene = AFRAME.scenes[0];\n\n      CS1.otherPlayers = {};\n    },\n\n    tick: function(time, dt) {},\n\n    start: function() {\n      CS1.logall = function(msg, channel = \"\") {\n        CS1.socket.emit(\"logall\", { msg: msg, channel: channel });\n      };\n\n      if (CS1.device == \"Oculus Quest\") {\n        CS1.myPlayer.leftHand = CS1.myPlayer.components.player.lh;\n        CS1.myPlayer.rightHand = CS1.myPlayer.components.player.rh;\n      }\n      \n      CS1.game.hasBegun = true;\n      \n      // Create a new event\n      let event = new CustomEvent(\"gameStart\", {\n        detail: {\n          message: \"Let's play!\",\n          time: new Date()\n        },\n        bubbles: true,\n        cancelable: true\n      });\n\n      // Dispatch the gameStart event\n      document.body.dispatchEvent(event);\n      \n      CS1.socket.emit(\"logall\", {\n          msg: `${CS1.myPlayer.name} is playing with a ${CS1.device} device!`,\n          channel: \"grab\"\n      });\n      \n      \n    },\n\n    playerDistanceTo: function(entity) {\n      return CS1.myPlayer.object3D.position.distanceTo(\n        entity.object3D.position\n      );\n    },\n\n    fireParticles: function(el) {\n      el.components.particles.fire();\n    },\n    \n    mobileSetup: function(){\n      CS1.myPlayer.cursor = document.querySelector(\"#cam-cursor\");\n            CS1.device = \"Mobile\";\n            CS1.scene.setAttribute(\"vr-mode-ui\", \"enabled: false\");\n            CS1.mylatesttap = 0;\n            let mbc = document.querySelector(\"#mobile-btn-container\");\n\n            let icon = document.createElement(\"img\");\n\n            icon.setAttribute(\n              \"src\",\n              \"https://cdn.glitch.com/376724db-dc5f-44ca-af35-36d00838079c%2Fmenu-64-icon.png?v=1562375093680\"\n            );\n            icon.setAttribute(\"style\", \"position:absolute;right:0px\");\n            mbc.appendChild(icon);\n\n            icon.addEventListener(\"touchstart\", e => {\n              let now = new Date().getTime();\n              let timesince = now - CS1.mylatesttap;\n\n              if (timesince < 600 && timesince > 0) {\n                // double tap\n\n                // Create a new event\n                let event = new CustomEvent(\"doubleTapMenu\", {\n                  detail: {\n                    message: \"Double Tappin!\",\n                    time: new Date()\n                  },\n                  bubbles: true,\n                  cancelable: true\n                });\n                // Dispatch the event\n                document.body.dispatchEvent(event);\n              } else {\n                // too much time to be a doubletap\n              }\n              CS1.mylatesttap = new Date().getTime();\n            });\n\n            let icon2 = document.createElement(\"img\");\n\n            icon2.setAttribute(\n              \"src\",\n              \"https://cdn.glitch.com/376724db-dc5f-44ca-af35-36d00838079c%2Fchat-64-icon.png?v=1562528152057\"\n            );\n            icon2.setAttribute(\"style\", \"position:absolute;left:0px\");\n            mbc.appendChild(icon2);\n\n            icon2.addEventListener(\"touchstart\", e => {\n              let now = new Date().getTime();\n              let timesince = now - CS1.mylatesttap;\n\n              if (timesince < 600 && timesince > 0) {\n                // double tap\n\n                // Create a new event\n                let event = new CustomEvent(\"doubleTapChat\", {\n                  detail: {\n                    message: \"Double Tappin!\",\n                    time: new Date()\n                  },\n                  bubbles: true,\n                  cancelable: true\n                });\n                // Dispatch the event\n                document.body.dispatchEvent(event);\n              } else {\n                // too much time to be a doubletap\n              }\n              CS1.mylatesttap = new Date().getTime();\n            });\n    },\n    \n    standardSetup: function(){\n      //No headset and not mobile\n      CS1.device = \"Standard\";\n      CS1.scene.setAttribute(\"vr-mode-ui\", \"enabled: false\");\n      CS1.myPlayer.cursor = document.querySelector(\"#cam-cursor\");\n    },\n    \n    oculusSetup: function(){\n      document.querySelector(\"#cam-cursor\").setAttribute(\"visible\", false);\n      document.querySelector(\"#cam-cursor\").setAttribute(\"fuse\", false);\n      document.querySelector(\"#cam-cursor\").pause();\n      CS1.device = \"Oculus Quest\";\n    },\n\n    determineDevice: function() {\n      self = this;\n      if (navigator.xr) {\n        navigator.xr.isSessionSupported(\"immersive-vr\").then(vrDevice => {\n          if(vrDevice&&navigator.userAgent.includes('OculusBrowser')){\n            self.oculusSetup();\n          }else if(AFRAME.utils.device.isMobile()){\n            self.mobileSetup();\n          }else{\n            self.standardSetup();\n          }\n        });\n      } else {\n        navigator.getVRDisplays().then(function(displays) {\n          if (\n            displays &&\n            displays[0] &&\n            displays[0].displayName == \"Oculus Quest\"\n          ) \n          {\n            self.oculusSetup();\n          } else if (AFRAME.utils.device.isMobile()){\n            self.mobileSetup();\n          } else \n           {\n            self.standardSetup();\n          }\n        });\n      }\n    }\n  });\n};\n","import config from '../../../.data/client-config.json';\n\nexport default CS1=>{\n  \n  AFRAME.registerSystem('player', {\n  schema: {\n    avatars:{default:config.avatar.models}\n  },  // System schema. Parses into `this.data`.\n\n  init: function () {\n    \n    function avatarType2Add(p,c){\n      \n      p.model.removeAttribute('gltf-model');\n\n      \n      if(!p.HEAD){\n        \n        \n        p.HEAD = document.createElement('a-gltf-model');\n        p.HAND_L = document.createElement('a-gltf-model');\n        p.HAND_R = document.createElement('a-gltf-model');\n        \n        p.model.appendChild(p.HEAD);\n        p.model.appendChild(p.HAND_L);\n        p.model.appendChild(p.HAND_R);\n        \n        p.HEAD.setAttribute('src',c.url);\n        p.HAND_L.setAttribute('src',c.lefthand);\n        p.HAND_R.setAttribute('src',c.righthand);\n        \n      }else{\n        p.HEAD.setAttribute('visible',true);\n        p.HAND_L.setAttribute('visible',true);\n        p.HAND_R.setAttribute('visible',true);\n      }\n      \n      \n    }\n    \n    \n    CS1.__addOtherPlayer = newPlayerObject=>{\n      console.log(`Adding new player with id: ${newPlayerObject.id}`)\n      console.log(newPlayerObject);\n      console.log(newPlayerObject.data);\n      let c = config.avatar.models[newPlayerObject.data.faceIndex];\n      let p = document.createElement('a-entity');\n      p.model = document.createElement('a-gltf-model');\n      p.avatarType = c.type;\n      p.faceIndex = newPlayerObject.data.faceIndex;\n      p.device = newPlayerObject.data.device;\n      p.appendChild(p.model);\n      p.setAttribute('player','');\n      p.model.setAttribute('shadow','');\n      p.model.setAttribute('scale',`${c.scale} ${c.scale} ${c.scale}`);\n      p.model.setAttribute('visible','true');\n      if(p.avatarType === 1){\n        \n         \n        p.model.setAttribute('src',`${c.url}`);\n        p.model.setAttribute('animation-mixer','clip:idle');\n        p.model.setAttribute('rotation',`${-newPlayerObject.data.rotation.x} ${newPlayerObject.data.rotation.y+180} ${newPlayerObject.data.rotation.z}`);\n        \n      } else if(p.avatarType === 2){\n         \n        avatarType2Add(p,c);\n       \n       \n      }\n        \n      p.id = newPlayerObject.id;\n      p.name = newPlayerObject.name;\n      p.setAttribute('position',`${newPlayerObject.data.position.x} ${newPlayerObject.data.position.y} ${newPlayerObject.data.position.z}`);\n      //DO SOMETHING MAYBE HERE WITH AVATAR TYPE 2\n      p.msg = document.createElement('a-entity');\n      let test = `Hello\\nI am\\n${newPlayerObject.name}!`;\n      p.msg.setAttribute('text',`value:${test};\n                                     align:center;\n                                     width:8;\n                                     wrap-count:24; \n                                     color:yellow`);\n      p.msg.setAttribute('position',c.msg.offset);\n      p.msg.setAttribute('rotation','0 0 0');\n      p.model.appendChild(p.msg);\n      CS1.scene.appendChild(p);\n      CS1.otherPlayers[p.id]=p;\n      CS1.sounds.playerJoined.play();\n    }\n  \n    CS1.__updateOtherPlayers = o=>{\n      Object.keys(o).forEach(function(key,index) {\n        if(key != CS1.socket.id){\n          if(CS1.otherPlayers[key]){\n            let c = config.avatar.models[o[key].faceIndex];\n            let op = CS1.otherPlayers[key];\n            \n            if(op.faceIndex != o[key].faceIndex){\n              \n              \n              op.faceIndex = o[key].faceIndex;\n              (c.type == 1)?op.model.setAttribute('src',c.url):op.model.setAttribute('src','');\n              \n              if(op.avatarType != c.type){\n                \n                op.avatarType = c.type;\n                \n                if(c.type == 1){\n                  //op.model.object3D.rotateY(Math.PI);\n                  //op.msg.setAttribute('rotation','0 0 0'); \n                  \n                  if(op.HEAD){\n                      op.HEAD.setAttribute('visible',false);\n                      op.HAND_L.setAttribute('visible',false);\n                      op.HAND_R.setAttribute('visible',false);\n                    }\n                  op.model.setAttribute('animation-mixer','clip:idle');\n                  op.model.object3D.position.y = 0;\n                  \n                  \n                }  \n                else{\n                  \n                  op.model.setAttribute('rotation','0 0 0');  \n                  avatarType2Add(op,c);\n                }\n                    \n                \n                  \n              }\n              \n              \n            }\n            op.setAttribute('position',`${o[key].position.x} ${o[key].position.y+c.yOffset} ${o[key].position.z}`);\n            op.model.setAttribute('scale',`${c.scale} ${c.scale} ${c.scale}`);\n            op.msg.setAttribute('text',`color:${c.msg.color}`);\n            if(    op.avatarType===2 &&   op.HEAD  &&  (op.device === 'Oculus Quest')   ){\n              \n              \n              op.model.object3D.rotation.set(0,  THREE.Math.degToRad(o[key].rotation.y+180), 0 );\n              if(op.isWalking){ \n                  op.model.object3D.position.y = Math.cos(CS1.myPlayer.timePlayed/100)/10;\n              }\n              \n              op.msg.object3D.position.set(0,3,0);\n              op.HEAD.object3D.position.y = 1.4;\n              op.HEAD.object3D.rotation.set( THREE.Math.degToRad(-o[key].rotation.x/2), 0, 0 );\n              \n              op.HAND_L.object3D.position.set(-1.2*o[key].lhp.x , 1.2*o[key].lhp.y+0.1, -3*o[key].lhp.z);\n              op.HAND_L.object3D.rotation.set(THREE.Math.degToRad(-o[key].lhr.x+45) , \n                                              THREE.Math.degToRad(o[key].lhr.y-90) , \n                                              THREE.Math.degToRad(o[key].lhr.z)\n                                             );\n              op.HAND_R.object3D.position.set(-1.2*o[key].rhp.x  , 1.2*o[key].rhp.y+0.1 , -3*o[key].rhp.z); \n              op.HAND_R.object3D.rotation.set(THREE.Math.degToRad(-o[key].rhr.x+45) , \n                                              THREE.Math.degToRad(o[key].rhr.y+90) , \n                                              THREE.Math.degToRad(o[key].rhr.z)\n                                             );\n              \n\n              \n            }\n            else if(op.avatarType===2 && op.HEAD){  // TYPE 2 WITHOUT OCULUS\n              \n              op.msg.setAttribute('position',`${c.msg.offset}`);\n              \n              op.model.object3D.rotation.set(0,  THREE.Math.degToRad(o[key].rotation.y+180), 0 );\n              if(op.isWalking){ \n                  op.model.object3D.position.y = 1.4 + Math.cos(CS1.myPlayer.timePlayed/100)/10;\n              }\n              else op.model.object3D.position.y = 1.4;\n              \n              op.HEAD.object3D.rotation.set( THREE.Math.degToRad(-o[key].rotation.x/2), 0, 0 );\n              \n              op.HAND_L.object3D.position.set(1 , 0 , 0);\n              op.HAND_L.object3D.rotation.set(THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0)\n                                             );\n              op.HAND_R.object3D.position.set(-1  , 0 , 0);\n              op.HAND_R.object3D.rotation.set(THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0)\n                                             );\n            \n          \n              \n              \n            }\n            else if(op.avatarType===1){\n              op.msg.setAttribute('position',`${c.msg.offset}`);\n              op.model.setAttribute('rotation',`${-o[key].rotation.x/8} ${o[key].rotation.y+180} ${o[key].rotation.z}`);  \n            }\n            \n            \n            \n          }\n        }\n      });\n    }\n  \n    CS1.__removePlayer = id=>{\n      CS1.scene.dispatchEvent(new CustomEvent('before-remove-player',{\n        detail:{\n          player: CS1.otherPlayers[id]\n        }\n      }));\n      CS1.otherPlayers[id].parentNode.removeChild(CS1.otherPlayers[id]);\n      delete CS1.otherPlayers[id]; \n      CS1.sounds.playerLeft.play();\n    }\n  \n    CS1.__setPlayerMessage = data=>{\n      if(CS1.otherPlayers[data.id]){\n        let c = config.avatar.models[CS1.otherPlayers[data.id].faceIndex];\n        CS1.otherPlayers[data.id].msg.setAttribute('text',`value:${data.msg};\n        align:center;width:8;wrap-count:24;color:${c.msg.color}`);\n      }\n    }\n    \n  },\n\n \n});\n  \n  AFRAME.registerComponent('player', {\n    schema:{\n      me:{type:'boolean',default:false},\n      eyelevel:{default:1.6},\n      cursorcolor:{default:'crimson'},\n      rayobjects:{default:'[grabbable],.screen,.collidable,.jukebox'},\n      rayfar:{default:4},\n      speed:{default:0.2}\n    },\n    init: function () {\n      const self = this;\n      if(this.data.me){\n        CS1.myPlayer = this.el;\n        this.addCam(self);\n        this.addHands(self);\n        this.isWalking=false;\n        this.addMyListeners();\n        this.el.timePlayed = 0;\n        this.el.setAttribute('chat','');\n        this.el.setAttribute('userdata','');\n        CS1.myPlayer.spawnPos = this.el.getAttribute('position');\n        CS1.myPlayer.spawnRot = this.el.getAttribute('rotation');\n        this.totalSteps = 0;\n        this.active = false;\n      }else{\n        \n      }\n    \n    },\n    addCam: function(self){\n      const ic = document.querySelector('[camera][wasd-controls]');\n      ic.removeAttribute('wasd-controls');\n      ic.removeAttribute('look-controls');\n      ic.setAttribute('camera','active:false');\n      //console.log(ic);\n      self.cam = document.createElement('a-entity');\n      self.cam.id = 'cam';\n      CS1.cam = self.cam;\n      self.cam.setAttribute('camera','active:true');\n      self.cam.setAttribute('position',`0 ${this.data.eyelevel} 0`);\n      self.cam.setAttribute('look-controls','pointerLockEnabled:true;reverseTouchDrag:true');\n      const cc = document.createElement('a-cursor');\n      cc.id = 'cam-cursor';\n      cc.setAttribute('material',`color:${this.data.cursorcolor}`);\n      cc.setAttribute('raycaster',`objects:${this.data.rayobjects};far:${this.data.rayfar}`);\n      self.cam.appendChild(cc);\n      self.el.appendChild(self.cam);\n      self.cam.addEventListener('loaded',_=>{\n        ic.parentNode.removeChild(ic);\n      });\n    },\n    addHands: function(self){\n      self.lh = document.createElement('a-entity');\n      self.lh.setAttribute('laser-controls','hand:left');\n      //self.lh.setAttribute('position','-1 0 0');\n      //self.lh.setAttribute('oculus-touch-controls','hand:left');\n      self.lh.setAttribute('raycaster',`objects:${this.data.rayobjects};far:${this.data.rayfar};useWorldCoordinates:true`);\n      self.rh = document.createElement('a-entity');\n      self.rh.setAttribute('laser-controls','hand:right');\n      //self.rh.setAttribute('position','1 0 0');\n      //self.rh.setAttribute('oculus-touch-controls','hand:right');\n      self.rh.setAttribute('raycaster',`objects:${this.data.rayobjects};far:${this.data.rayfar};useWorldCoordinates:true`);\n      self.el.appendChild(self.lh);\n      self.el.appendChild(self.rh);\n    },\n    addMyListeners: function(){\n      let self = this;\n      CS1.myPlayer.setAttribute('movement-controls',`speed:0;camera:#cam`);\n      document.addEventListener('gameStart',e=>{\n        //console.log('Handling gameStart on my player.');\n        self.el.id = CS1.socket.id;\n        self.el.classList = 'my-player';\n        self.active = true;\n        \n        \n        \n        if(CS1.device == 'Oculus Quest'){\n          self.setOculusCtls();\n          CS1.scene.enterVR();\n          this.lh.addEventListener('model-loaded',e=>{\n            \n            this.lh.loaded = true;\n            \n\n            const object = this.lh.getObject3D('mesh');\n            \n            if (object) {\n              object.traverse(function (node) {\n                if (node.isMesh && node.name === 'stick') {\n              \n\n                  \n                 }\n               });\n            }\n            \n            \n            \n            \n          });\n        }\n        if(CS1.device == 'Mobile'){\n          this.setTouchCtls();\n        }\n        if(CS1.device == 'Standard'){\n          this.setKeyCtls();\n        }\n          \n          \n        \n        self.setSpeed(self.data.speed);\n        \n//         CS1.sounds.playerJoined.onended = ()=>{\n//           CS1.myPlayer.setAttribute('movement-controls',`speed:${self.data.speed};camera:#cam`);\n//         }\n\n        CS1.sounds.playerJoined.play()\n        .catch(err=>{\n          //CS1.myPlayer.setAttribute('movement-controls',`speed:${self.data.speed};camera:#cam`);            \n        });\n        \n        \n        //let c = config.avatar.models[0];\n        let playerData = {};\n        let pos = Object.assign({},CS1.myPlayer.getAttribute('position'));\n        pos.x = Number(pos.x.toFixed(2));\n        pos.y = Number(pos.y.toFixed(2))+0.3;\n        pos.z = Number(pos.z.toFixed(2));\n        playerData.position = pos;\n        let rot = Object.assign({},CS1.cam.getAttribute('rotation'));\n        rot.x = Number(Number(rot.x).toFixed(1));\n        rot.y = Number(Number(rot.y).toFixed(1));\n        rot.z = Number(Number(rot.z).toFixed(1));\n        playerData.rotation = rot;\n        playerData.faceIndex = 1;\n        playerData.device = CS1.device;\n        CS1.socket.playerData.faceIndex = playerData.faceIndex;\n        CS1.myPlayer._avatarType = config.avatar.models[CS1.socket.playerData.faceIndex].type;\n        if(    (CS1.device == 'Oculus Quest') &&  (CS1.myPlayer._avatarType === 2)  ){\n          playerData.lhp = {x:0,y:0,z:0};\n          playerData.lhr = {x:0,y:0,z:0};\n          playerData.rhp = {x:0,y:0,z:0};\n          playerData.rhr = {x:0,y:0,z:0};\n        }\n        CS1.socket.emit('new-player',playerData);\n        \n        \n        \n        \n        \n        \n        \n        \n      })\n    },\n    setKeyCtls: function(){\n      document.body.addEventListener('keydown',e=>{\n        // 0=idle, 1=walk\n         switch(e.which){\n           case 87:\n           case 38:\n           case 83:\n           case 40:\n             if(!this.isWalking){\n               CS1.socket.emit('anim','walk');\n               this.isWalking=true;    \n             }       \n         }\n      });\n      document.body.addEventListener('keyup',e=>{\n        // 0=idle, 1=walk\n         switch(e.which){\n           case 87:\n           case 38:\n           case 83:\n           case 40:\n             CS1.socket.emit('anim','idle');\n             this.isWalking=false;\n         }\n      });\n    },\n    setTouchCtls: function(){\n      window.addEventListener('touchstart',e=>{\n        if(!this.isWalking){\n               CS1.socket.emit('anim','walk');\n               this.isWalking=true;    \n             }    \n      });\n      window.addEventListener('touchend',e=>{\n         CS1.socket.emit('anim','idle');\n         this.isWalking=false;\n      });\n    },\n    setOculusCtls: function(){\n      \n      let lh = this.lh.components[\"oculus-touch-controls\"];\n      let rh = this.rh.components[\"oculus-touch-controls\"];\n        \n      \n      setTimeout(()=>{\n        \n        \n        if(AFRAME.utils.device.checkHeadsetConnected()){\n          lh.el.addEventListener('thumbsticktouchstart',e=>{\n             if(!this.isWalking){\n                   CS1.socket.emit('anim','walk');\n                   this.isWalking=true;    \n                 }   \n          });\n          lh.el.addEventListener('thumbsticktouchend',e=>{\n             CS1.socket.emit('anim','idle');\n             this.isWalking=false; \n          });\n          rh.el.addEventListener('thumbsticktouchstart',e=>{\n             if(!this.isWalking){\n                   CS1.socket.emit('anim','walk');\n                   this.isWalking=true;    \n                 }   \n          });\n          rh.el.addEventListener('thumbsticktouchend',e=>{\n             CS1.socket.emit('anim','idle');\n             this.isWalking=false; \n          });\n        }\n        \n        \n        \n      },3000);\n      \n      \n    },\n    tick: function(t,dt){\n      \n    if(!this.data.me && this.active)return;\n      \n    if(++this.totalSteps%6 == 0) {\n      \n      \n      let playerData = {};\n      let pos = Object.assign({},CS1.myPlayer.getAttribute('position'));\n      pos.x = Number(pos.x.toFixed(2));\n      pos.y = Number(pos.y.toFixed(2));\n      pos.z = Number(pos.z.toFixed(2));\n      playerData.position = pos;\n      let rot = Object.assign({},CS1.cam.getAttribute('rotation'));\n      rot.x = Number(Number(rot.x).toFixed(1));\n      rot.y = Number(Number(rot.y).toFixed(1));\n      rot.z = Number(Number(rot.z).toFixed(1));\n      playerData.rotation = rot;\n      playerData.faceIndex = (CS1.socket.playerData)?CS1.socket.playerData.faceIndex:0;\n      if(   (CS1.device == 'Oculus Quest') &&  (CS1.myPlayer._avatarType === 2)  && this.lh.hasLoaded ){\n          \n          let lhp = this.lh.getAttribute('position');\n            \n          playerData.lhp = {};\n          playerData.lhp.x = Number(lhp.x.toFixed(2));\n          playerData.lhp.y = Number(lhp.y.toFixed(2));\n          playerData.lhp.z = Number(lhp.z.toFixed(2));\n          let lhr = this.lh.getAttribute('rotation')\n          playerData.lhr = {};\n          playerData.lhr.x = Number(lhr.x.toFixed(1));\n          playerData.lhr.y = Number(lhr.y.toFixed(1));\n          playerData.lhr.z = Number(lhr.z.toFixed(1));\n          let rhp = this.rh.getAttribute('position')\n          playerData.rhp = {};\n          playerData.rhp.x = Number(rhp.x.toFixed(2));\n          playerData.rhp.y = Number(rhp.y.toFixed(2));\n          playerData.rhp.z = Number(rhp.z.toFixed(2));\n          let rhr = this.rh.getAttribute('rotation')\n          playerData.rhr = {};\n          playerData.rhr.x = Number(rhr.x.toFixed(1));\n          playerData.rhr.y = Number(rhr.y.toFixed(1));\n          playerData.rhr.z = Number(rhr.z.toFixed(1));\n        \n      }\n      CS1.socket.setPlayerData(playerData);\n      CS1.socket.sendUpdateToServer();\n      if(this.totalSteps%36 == 0 && CS1.hud && CS1.hud.oxygenMeter){\n        CS1.hud.oxygenMeter.animateTo(CS1.hud.oxygenMeter.el.value-0.0035);\n      }\n      \n      \n    }\n      \n      \n    this.el.timePlayed += dt;\n      \n      \n    },\n    setSpeed: function(s){\n      if(document.querySelector('#navmesh'))\n        this.el.setAttribute('movement-controls',`constrainToNavMesh: true; speed: ${s}`);\n      else\n        this.el.setAttribute('movement-controls',`speed: ${s}`);  \n    }\n    \n  });\n  \n  \n  \n  AFRAME.registerPrimitive('a-player', {\n  defaultComponents: {\n    player: {me:true},\n  },\n\n  // Maps HTML attributes to component properties.\n  mappings: {\n    eyelevel: 'player.eyelevel',\n    cursorcolor: 'player.cursorcolor',\n    rayobjects: 'player.rayobjects',\n    rayfar: 'player.rayfar',\n    speed: 'player.speed'\n  }\n});\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n}\n\n\n\n/*\n<a-entity id=\"my-player\" \n              position=\"0 0 0\"\n              movement-controls=\"constrainToNavMesh: true; speed: 0.2\"\n              player=\"me:true\"\n              chat\n              userdata>\n      \n        <a-entity id=\"cam\"\n                camera\n                position=\"0 1.6 0\"\n                rotation=\"31.283 -12.834 0\"\n                look-controls=\"pointerLockEnabled:true;reverseTouchDrag:true\">\n        \n          <a-cursor id=\"cam-cursor\" \n                    material=\"color:crimson\"\n                    raycaster=\"objects:[grabbable],[sign-in],[iot-api], .screen, .collidable;far:4\"></a-cursor>\n\n        </a-entity>\n        \n        <a-entity id=\"left-hand\" position=\"0 1 0\" laser-controls=\"hand: left\"  \n                raycaster=\"objects:[grabbable],[sign-in],[iot-api], .screen, .collidable;far:4;useWorldCoordinates:true\" ></a-entity>\n        \n      \n<a-entity id=\"right-hand\" position=\"0 1 0\" laser-controls=\"hand: right\"  \n                raycaster=\"objects:[grabbable],[sign-in],[iot-api], .screen, .collidable;far:4;useWorldCoordinates:true\" ></a-entity>\n        \n        \n          \n</a-entity>\n*/\n\n\n\n/*\n\n\np.model.addEventListener('model-loaded', () => { \n        \n          const object = p.model.getObject3D('mesh');\n\n\n          if (object) {\n            object.traverse(function (node) {\n              \n              switch(node.name){\n                case 'BODY': p.BODY = node;\n                  break;\n                case 'HAND_L': p.HAND_L = node;\n                  break;\n                case 'HAND_R': p.HAND_R = node;\n                  break;\n                case 'HEAD': p.HEAD = node;\n                  break;\n              }\n       \n             });\n          }\n        \n        \n        \n        });\n\n\n*/","import config from '../../../.data/client-config.json';\nexport function bgmlite(CS1){\n  let tracks = config.bgm.songs;\n  let audio = document.createElement('audio');\n  let bgmUrlStart = 'https://api.soundcloud.com/tracks/';\n  let bgmUrlEnd = '/stream?client_id=b9d11449cd4c64d461b8b5c30650cd06'; \n  let nextSongBtn = document.createElement('button');\n  nextSongBtn.innerHTML = \"PLAY NEXT SONG\";\n  nextSongBtn.zIndex = 100;\n  nextSongBtn.style.display = \"none\";\n  nextSongBtn.addEventListener('click',e=>{\n    CS1.bgm.playNext();\n  });\n  let ui = document.createElement('div');\n  ui.style.margin = '0 auto';\n  ui.style.width = '800px';\n  setTimeout(()=>{\n   document.body.appendChild(ui);\n   ui.appendChild(nextSongBtn);\n  },5000);\n  \n  if(config.bgm.playAll){\n   audio.addEventListener('ended',e=>{\n    console.log('bgm song ended');\n    CS1.bgm.playNext();\n   });\n}\n  \nlet currentSongIndex = 0;\n  \n  CS1.bgm = {\n    audio:audio,\n    tracks: tracks,\n    play: ()=>{\n      audio.play();\n      audio.volume = config.bgm.volume;\n    },\n    playTrackIndex: n=>{\n      currentSongIndex=n;\n      audio.src = bgmUrlStart + tracks[currentSongIndex] + bgmUrlEnd;\n      audio.crossorigin = 'anonymous';\n      audio.load();\n      audio.loop = !config.bgm.playAll;\n      audio.play();\n      audio.volume = config.bgm.volume;\n    },\n    pause: ()=>{\n      audio.pause();\n    },\n    playNext: ()=>{\n      currentSongIndex++;\n      if(currentSongIndex == tracks.length) currentSongIndex = 0;\n      audio.src = bgmUrlStart + tracks[currentSongIndex] + bgmUrlEnd;\n      audio.crossorigin = 'anonymous';\n      audio.load();\n      audio.loop = !config.bgm.playAll;\n      audio.play();\n      audio.volume = config.bgm.volume;\n    },\n    \n  }//end of CS1.bgm definition\n  \n   document.addEventListener('gameStart',e=>{\n    if(CS1.bgm.tracks.length) CS1.bgm.playTrackIndex(0);\n  })\n\n}//end of bgmlite\n\n\n","import config from '../../../.data/client-config.json';\nexport default CS1=>{\n  let socket = CS1.socket = io();\n  socket.on('connect',()=>{\n\n    if(socket.authid){\n      \n      socket.emit('reauth',socket.authid);\n      socket.id = socket.authid;\n      console.log('Emitting reauth!');\n      console.log('socket.id : ',socket.id);\n      console.log('socket.playerData : ');\n      console.log(socket.playerData);\n      console.log('socket.lastPlayerData : ');\n      console.log(socket.lastPlayerData);\n      socket.isInitialized = true;\n      \n    }else{\n      \n      socket.playerData = {position:{},rotation:{},faceIndex:0};\n      socket.lastPlayerData = {position:{},rotation:{},faceIndex:0};\n      //REVISIT\n      CS1.login = (un,pw)=>{\n          socket.emit('login',{name:un,pw:pw});\n        }  \n      \n    }\n    \n    \n    \n    \n  }); \n  \n  socket.on('login-results',data=>{\n    //console.log(data);\n    if(data.success) {\n      document.querySelector('#login').style.zIndex = -1;\n      document.querySelector('#login').style.display = 'none'; \n      document.querySelector('#login').setAttribute('hidden','');\n      CS1.myPlayer.name = data.name;\n      CS1.game.start();\n      socket.authid=socket.id;\n    }\n    else document.getElementById('login-msg').innerHTML = data.msg;\n  });\n  \n  socket.on('anim', data=>{\n    if(CS1.otherPlayers[data.id]){\n      \n      CS1.otherPlayers[data.id].isWalking = (data.anim=='walk');\n      if(CS1.otherPlayers[data.id].avatarType===1)\n        CS1.otherPlayers[data.id].firstElementChild.setAttribute('animation-mixer',`clip:${data.anim}`);\n      \n    }\n  });\n  \n  socket.on('avatar', data=>{\n    if(CS1.otherPlayers[data.id])\n      CS1.otherPlayers[data.id].components.player.setAvatar(data.avatar);\n  });\n    \n  socket.on('disconnect', ()=>{\n    console.log('I have disconnected.');\n    //socket.isInitialized = false;\n  });\n  \n  socket.initializePlayerData = playerData=>{\n    socket.isInitialized = true;\n    socket.playerData = playerData;\n    socket.playerData.faceIndex = 0;\n    socket.emit('new-player', playerData);\n  }\n  \n  socket.setPlayerData = playerData=>{\n    socket.playerData = Object.assign({},playerData);\n  }\n  \n  socket.on('new-player', newPlayerObject=>{\n    if(CS1.debug)console.log('New player object received: ', newPlayerObject);\n    if(CS1.game.hasBegun && newPlayerObject.id != CS1.socket.id) {\n      setTimeout(()=>{CS1.say(`${newPlayerObject.name} has joined the game!`)},1000);\n      CS1.__addOtherPlayer(newPlayerObject);\n    }\n  });\n  \n  socket.on('initial-bodies-state', data=>{\n    if(CS1.debug){\n      console.warn('SETTING INITIAL BODIES STATE');\n      console.log(data);\n    }\n    CS1.__updateGrabbables(data);\n  });\n  \n  const isEqual=CS1.utils.isEqual;\n  //Object.is(socket.playerData, socket.lastPlayerData)\n  socket.sendUpdateToServer = ()=>{\n    \n    \n    if(!AFRAME.utils.deepEqual( socket.lastPlayerData , socket.playerData )){\n      \n      \n      socket.emit('send-update',socket.playerData);\n      \n      socket.lastPlayerData = Object.assign({},socket.playerData);\n      \n      let bodiesData = [];\n      for(var name in CS1.grabbables){\n        let b = CS1.grabbables[name];\n        if(b.states.includes(\"moving\") || b.dirty){\n          let d = {\n            name: name,\n            position: b.object3D.position,\n            scale: b.object3D.scale,\n            rotation: { \n              x: b.object3D.quaternion.x,\n              y: b.object3D.quaternion.y,\n              z: b.object3D.quaternion.z,\n              w: b.object3D.quaternion.w,\n            },\n            soundState: b.soundState\n          };\n          b.dirty = false;\n          bodiesData.push(d);\n        }\n      }\n      if(bodiesData.length > 0) {\n        socket.emit('update-bodies',bodiesData);\n        if(CS1.debug){\n          console.log(`SENDING ${bodiesData[0].name} DATA TO SERVER`);\n          console.log(bodiesData);\n        } \n      }\n      \n      \n      \n    }\n    \n\n    \n  }\n  \n  socket.on('players-already-here', o=>{\n    if(CS1.debug){\n      console.log('receiving players already here');\n      console.log(o);\n    }\n    Object.keys(o).forEach(function(key,index) {\n      CS1.__addOtherPlayer({\"id\":key,\n        \"name\":o[key].name,\n        \"data\":{\"position\": o[key].position,\n                \"rotation\": o[key].rotation,\n                \"faceIndex\":o[key].faceIndex}\n        });\n    });\n    setTimeout(()=>{CS1.say(CS1.game.announcements.welcome);},CS1.game.welcomeDelay);\n  });\n  \n  socket.on('request-for-bodies', ()=>{\n  let ibs = {};\n  for(name in CS1.grabbables){\n    if (!CS1.grabbables.hasOwnProperty(name)) continue;\n    let b = CS1.grabbables[name];\n    ibs[name] = {\n          name: name,\n          position: b.object3D.position,\n          scale: b.object3D.scale,\n          rotation: { \n            x: b.object3D.quaternion.x,\n            y: b.object3D.quaternion.y,\n            z: b.object3D.quaternion.z,\n            w: b.object3D.quaternion.w,\n          },\n          soundState: b.soundState\n        };\n  }\n    socket.emit('initial-bodies-state',ibs);\n    if(CS1.debug){\n      console.warn('SENDING INITIAL BODIES STATE TO SERVER');\n      console.log(ibs);\n    }\n});\n  \n  socket.on('update-bodies', grabbablesData=>{\n    if(CS1.game.hasBegun)CS1.__updateGrabbables(grabbablesData);\n  });\n  \n  socket.on('update-players', playersObject=>{\n    if(CS1.game && CS1.game.hasBegun)CS1.__updateOtherPlayers(playersObject);\n  });\n\n  socket.on('remove-player',id=>{\n    if(CS1.game.hasBegun && CS1.otherPlayers[id]){\n      let name = CS1.otherPlayers[id].name;\n      CS1.__removePlayer(id);\n      setTimeout(()=>{CS1.say(`${name} ${config.playerLeftMsg}`)},1500);\n    }\n  });\n  \n  socket.on('msg',data=>{\n    if(CS1.game.hasBegun)CS1.__setPlayerMessage(data);\n  });\n  \n  socket.on('failed-socket',()=>{\n    window.location.reload();\n  });\n  \n  socket.on('log',msg=>{console.log(msg)});\n  \n  socket.on('say',data=>{\n    CS1.say(data.msg,data.name);\n  });\n  \n\n\n  \n}","import config from '../config/client-config.json';\nexport default CS1=>{\n  \n  AFRAME.registerSystem('collectible', {\n  schema: {},  // System schema. Parses into `this.data`.\n\n  init: function () {\n    \n    CS1.collectibles=[];\n   \n    CS1.socket.on('collect',data=>{\n      if(!(CS1.game && CS1.game.hasBegun))return;\n      let collectedEntity = CS1.collectibles[data.index];\n      if(!collectedEntity)return;\n      if(collectedEntity.el.components.sound__loop)collectedEntity.el.components.sound__loop.pause();\n      collectedEntity.el.setAttribute('visible',false);\n      //collectedEntity.el.setAttribute('scale','0 0 0');\n      collectedEntity.soundIsPlaying=true;\n      collectedEntity.el.components.sound__collect.playSound();\n      if(collectedEntity.data.cb && !AFRAME.utils.device.isMobile()){\n        CS1.game[collectedEntity.data.cb](collectedEntity.el);\n      }\n      collectedEntity.el.addEventListener('sound-ended',e=>{\n        collectedEntity.soundIsPlaying=false;\n        collectedEntity.pause();     \n      });\n      if(data.collector==CS1.socket.id && collectedEntity.data.affects){  \n        if(collectedEntity.data.affects.includes('avatar')){\n           let s;\n           switch(collectedEntity.el.id){\n             case 'avatar-upgrade-1':\n               s=0.35;\n               break;\n             case 'avatar-upgrade-2':\n               s=0.5\n           }\n           CS1.myPlayer.components.player.setSpeed(s);\n           console.log('speed boost');\n        }else  \n        CS1.stats[collectedEntity.data.affects].changeBy(collectedEntity.data.value);\n      }\n      if( (data.collector!=CS1.socket.id) && (collectedEntity.data.affects=='avatarUpgrade')){  \n         console.log(CS1.otherPlayers[data.collector]);\n        let m,t;\n         switch(collectedEntity.el.id){\n           case 'avatar-upgrade-1':\n              m = document.querySelector('#avatar-to-clone-1').cloneNode();\n              t = 'Skully';\n              break;\n           case 'avatar-upgrade-2':\n              m = document.querySelector('#avatar-to-clone-2').cloneNode();\n              t = 'Speedy';\n         }\n        \n         let op = CS1.otherPlayers[data.collector];\n         m.appendChild(op.msg);\n         op.msg.setAttribute('text',`value:${t};\n                                   align:center;\n                                   width:8;\n                                   wrap-count:24; \n                                   color:yellow`);\n         m.setAttribute('visible',true);\n         op.appendChild(m);\n         op.removeChild(op.model);\n         op.model = m;\n         \n      }\n    });\n    \n    CS1.socket.on('spawn-collectible',index=>{\n      let collectedEntity = CS1.collectibles[index];\n      if(collectedEntity.el.components.sound__loop)collectedEntity.el.components.sound__loop.play();\n      collectedEntity.el.setAttribute('visible',true);\n      //collectedEntity.el.setAttribute('scale','1 1 1');\n      collectedEntity.play();\n    });\n\n    CS1.socket.on('request-for-collectibles',()=>{\n      let d=[];\n      CS1.collectibles.forEach(c=>{\n        d.push({spawns:c.data.spawns,spawnDelay:c.data.spawnDelay});\n      });\n      CS1.socket.emit('initial-collectibles-state', d);\n    });\n    \n    \n    \n    \n    \n  },\n\n \n});\n  \n  \n  AFRAME.registerComponent(\"collectible\", {\n\tschema: {\n    threshold: {type: 'number', default: 2.7},\n    soundCollect: {type: 'string',default:'https://cdn.glitch.com/f8abb766-9950-44ff-9adb-2f5f53fdaf1b%2Fpowerup_1.mp3?1552158629039'},\n    soundLoop: {},\n    cb:{type:'string',default:''},\n    affects:{type:'string',default:''},\n    value:{type:'number',default:1},\n    spawns:{type:'boolean',default:false},\n    spawnDelay:{type:'number',default:5}\n\t},\n\tinit: function()\n\t{\n    \n    this.el.setAttribute('sound__collect',`src:url(${this.data.soundCollect})`);\n    if(this.data.soundLoop)this.el.setAttribute('sound__loop',`src:url(${this.data.soundLoop});autoplay:true;loop:true`);\n    CS1.collectibles.push(this);\n    console.log('running collectible init');\n    this.soundIsPlaying=false;\n    \n    \n      \n  }, \n\ttick: function()\n\t{   \n     if((this.el.object3D.position.distanceTo(CS1.myPlayer.object3D.position) < this.data.threshold)&&\n          this.data.affects!='avatarUpgrade'){ \n       this.collect();\n     }\n     if(this.data.affects=='avatarUpgrade' &&\n        (this.el.parentElement.object3D.position.distanceTo(CS1.myPlayer.object3D.position) < this.data.threshold) ){\n       this.collect();\n     }\n\t\t\n\t},\n  \n  collect: function(){\n    if(this.soundIsPlaying)return;\n    if(CS1.socket.disconnected){\n      if(this.el.components.sound__loop)this.el.components.sound__loop.pause();\n      this.el.setAttribute('visible',false);\n      this.el.setAttribute('scale','0 0 0');\n      this.soundIsPlaying=true;\n      this.el.components.sound__collect.playSound();\n      if(this.data.cb)CS1.game[this.data.cb](this.el);\n      if(this.data.affects && this.data.affects !== 'avatarUpgrade')\n        CS1.stats[this.data.affects].animateTo(CS1.stats[this.data.affects].value+this.data.value);\n      this.el.addEventListener('sound-ended',e=>{\n        this.soundIsPlaying=false;\n        this.pause();   \n      }); \n      if(this.data.spawns){\n             setTimeout(()=>{\n                if(this.el.components.sound__loop)this.el.components.sound__loop.play();\n                this.el.setAttribute('visible',true);\n                this.el.setAttribute('scale','1 1 1');\n                this.play();\n             },this.data.spawnDelay*1000);\n           }\n    } else{\n      CS1.socket.emit('request-collection',{index: CS1.collectibles.indexOf(this)}); \n    \n    }\n \n  }\n  \n  \n})\n  \n}","export default CS1=>{\n  \n  AFRAME.registerComponent('npc', {\n    schema:{\n      waypoints:{type:'array'},\n      name:{type:'string'},\n      roam:{type:'boolean',default:false}\n    },\n    init: function () {\n      this.waypoints=this.data.waypoints;\n      this.waypointsIndex=0;\n      this.moves=0;\n      if(this.data.name){\n        this.name = this.data.name;\n      }else{\n        this.name = (CS1.npc)? `npc${CS1.npc.length}`:'npc0';\n      }\n      if(CS1.npc){\n        CS1.npc[this.name]=this;\n      }else{\n        CS1.npc={};\n        CS1.npc[this.name]=this;\n      }\n      this.addListeners();\n      CS1.socket.emit('register-npc',{name:this.name,waypoints:this.waypoints});\n      if(this.data.roam)this.requestMove();\n    },\n    addListeners: function(){\n      let self = this;\n      this.el.addEventListener('navigation-end',this.onNavigationEnd.bind(self));\n      if(!CS1.socket._callbacks[\"$npc-move\"])\n      CS1.socket.on('npc-move',data=>{\n        if(data.dest===self.dest)return;\n        CS1.npc[data.name].dest = data.dest;\n        CS1.npc[data.name].setPosition(data.pos);\n        CS1.npc[data.name].move(data.dest);\n      });\n    },\n    setWaypoints: function(waypointsArray){\n      this.waypoints = waypointsArray;\n      CS1.socket.emit('set-npc-waypoints',{name:this.name,waypoints:waypointsArray});\n    },\n    addWaypoint: function(waypoint){\n      this.waypoints.push(waypoint);\n      CS1.socket.emit('add-npc-waypoint',{name:this.name,waypoint:waypoint});\n    },\n    move: function (destination=false) {\n      this.moves++;\n      let s;\n      let dest={};\n      if(destination){\n        s = destination;\n      }else{\n        s=this.waypoints[this.waypointsIndex];\n      }\n      if(!s){\n          console.error('You must define some waypoints for your npc to roam! < npc component >');\n          return;\n      }else{\n          let a = s.split(' ');\n          dest.x=a[0];\n          dest.y=a[1];\n          dest.z=a[2];\n          if (dest) this.el.setAttribute('nav-agent', {\n            active: true,\n            destination: dest,\n            speed: 2\n          });\n      \n      }\n    },\n    setPosition: function (position) {\n      this.el.setAttribute('position',position);\n    },\n    tick: function(t,dt){\n    \n     \n    },\n    requestMove: function (dest=''){\n      CS1.socket.emit('npc-move',{\n          name:this.name,\n          pos:this.el.getAttribute('position'),\n          dest:dest \n      });\n    },\n    onNavigationEnd: function(e){\n      //this.dest=false;\n      //console.log(`NPC Navigation has ended for ${this.name}.`)\n      //console.log(e);\n      this.waypointsIndex++;\n      if( this.waypointsIndex==this.waypoints.length)this.waypointsIndex=0;\n      let d = this.waypoints[this.waypointsIndex];\n      if(this.data.roam)this.requestMove(d);\n    }\n  });\n  \n}","export default CS1=>{\n   \nAFRAME.registerComponent('userdata', {\n  init: function () {\n    //{avatar:'Mary'}\n    CS1.db = {};\n    CS1.db.set = (keyValueObject,cb)=>{\n      CS1.socket.emit('db-set', keyValueObject, cb);\n    }\n    //'avatar'\n    CS1.db.get = (key,cb)=>{\n      CS1.socket.emit('db-get', key, cb);\n    }\n  }\n  \n});\n\n}","export default CS1=>{\n  \n  AFRAME.registerComponent('iot-api', {\n    schema:{\n      LED:{type:'string',default:'on'}\n    },\n    init: function () {   \n      const self = this;\n      this.el.addEventListener('click',e=>{\n        console.log('Click detected on LED.');\n        self.toggleLED();\n      }); \n      CS1.iot = {};\n      CS1.iot.set = (keyValueObject,cb)=>{\n       CS1.socket.emit('iot-set', keyValueObject, cb);\n      }\n      CS1.iot.get = (key,cb)=>{\n        CS1.socket.emit('iot-get', key, cb);\n      }\n      CS1.socket.on('iot-update', data=>{\n        \n        console.log('LED update');\n        if(data.LED == 'on'){\n          this.onLED();\n        }else{   \n          this.offLED();\n        }\n      \n      });\n      CS1.iot.get('LED',v=>{\n        \n        console.log('LED INITIALIZE');\n        if(v == 'on'){\n          this.onLED();\n        }else{   \n          this.offLED();\n        }\n      \n      });\n    },\n    setLED: function (state) {\n      \n    },\n    offLED: function(){\n      let mat = 'color:#551818;emissiveIntensity:0';\n      this.data.LED = 'off';\n      this.el.setAttribute('material',mat);\n    },\n    onLED: function(){\n      let mat = 'color:red;emissiveIntensity:4'; \n      this.data.LED = 'on';\n      this.el.setAttribute('material',mat);\n    },\n    toggleLED: function () {\n      let mat;\n      if(this.data.LED == 'on'){\n        this.offLED();\n        CS1.iot.set({LED:'off'},()=>{});\n      }else{   \n        this.onLED();\n        CS1.iot.set({LED:'on'},()=>{});\n      }\n       \n    },\n    tick: function(t,dt){\n    \n     \n    }\n  });\n  \n}"],"names":["window","addEventListener","loadSpinner","document","createElement","className","i","appendChild","style","left","innerWidth","loadingScreen","querySelector","width","height","innerHeight","scratchMat","copyTransform","THREE","Matrix4","source","destination","matrix","copy","matrixWorld","applyMatrix","getInverse","parent","AFRAME","registerSystem","schema","init","CS1","grabbables","__updateGrabbables","grabbablesData","Object","keys","length","name","game","hasBegun","forEach","d","index","b","debug","console","log","position","object3D","scale","rotation","quaternion","socket","on","origin","id","entity","type","setAttribute","set","x","y","z","setRotationFromQuaternion","Quaternion","w","soundState","custom","key","value","entries","scene","grabbableName","callbacks","components","grabbable","data","postRelease","registerComponent","remote","default","self","this","cursor","isDragging","originEl","el","proxyObject","classList","add","String","_callbacks","msg","channel","c","color","getAttribute","s","src","collectible","launchable","onGameStart","emit","nodeName","device","e","grab","setTimeout","release","removeEventListener","cursorObject","cancelBubble","detail","cursorEl","sceneEl","Object3D","visible","addState","remove","removeState","utils","checkHeadsetConnected","tick","ctrlEl","active","intersection","point","raycaster","refreshObjects","side","url","dependencies","canvas","uid","ctx","getContext","fillStyle","fillRect","dataProcessed","fetch","then","resp","json","processData","catch","err","dataToProcess","list","day","push","dt","dt_txt","temp_max","k2f","main","k","Math","round","t","visualizeData","updateCanvas","dt_width","hue","drawRectangles","material","getObject3D","map","needsUpdate","shaders","Polkadot_Shader","Sun_Shader","Jelly_Shader","Green_Dance_Shader","Cosmic_Shader","Cool_Tiles_Shader","Disco_Shader","Marching_Ants_Shader","Goo_Shader","Psycho_Shader","Ova_Shader","Thruster_Shader","Flowing_Circles_Shader","Electric_Shader","CS1_Shader","Force_Field_Shader","defaults","labelText","suffix","labelColor","gradientColor1","gradientColor2","max","RingDial","opts","assign","size","strokeWidth","radius","cachedValue","targetValue","isAnimating","direction","svg","defs","slice","overlay","text","label","arrow","create","prototype","createSvg","createDefs","createSlice","createOverlay","createText","createLabel","container","createElementNS","gc1","gc2","linearGradient","stop1","stop2","linearGradientBackground","r","circle","navigator","vendor","includes","fontSize","tspanSize","innerHTML","n","createArrow","arrowYOffset","m","arrowSize","arrowPosX","arrowPosY","arrowDOffset","animateStart","v","intervalOne","setInterval","p","toFixed","clearInterval","setValue","animateTo","to","a","currentScale","changeBy","amt","animateReset","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","PI","cos","sin","describeArc","startAngle","endAngle","start","end","largeArcFlag","join","xy","floor","Meter","[object Object]","min","low","high","optimum","widget","marginTop","marginBottom","parseFloat","range","textAlign","onload","loginHTML","config","theme","overlayColor","formColor","logo","titleFontColor","gameName","formButtonColor","title","loginContainer","login","preventDefault","connected","sounds","playerJoined","play","close","zIndex","myPlayer","player","setSpeed","say","announcements","welcome","welcomeDelay","focus","onLine","getElementById","code","update","registerShader","timeMsec","is","myOffset","myColor","vertexShader","pnoise3","fragmentShader","change","changeDimension","elPosition","from","delta","cdIsX","dots","scn","firstInitTime","Date","now","parentNode","removeChild","logs","loggers","message","loggerComponent","receiveLog","logall","registerLogger","component","apply","unregisterLogger","splice","indexOf","filter","showErrors","system","evt","onerror","errorMsg","lineNumber","column","errorObj","JSON","stringify","shift","removeAttribute","sound__launch","playSound","burst","launchSound","launch","getDir","ray","getWorldDirection","dir","launchData","controls","m2","avatar1","avatar","models","avatar2","avatar3","hiddenDiv","display","body","p1","p2","p3","p4","ui","box","thumbnail","showBox","addBlasterBall","sphere","pp","addMagicPellet","playDMSound","msgMuteToggle","dmSoundControl","innerText","runOnce","m1b1","onclick","__display__stats","m1b2","m1b3","mbs","querySelectorAll","addHoverSound","m1b4","m2b1","playerData","faceIndex","_avatarType","m2b2","m2b3","m2b1img","m2b1name","m2b2img","m2b2name","m2b3img","m2b3name","stats","sound","panels","head","ec","vrui","ctr","offset","m1","lh","rh","pause","cam","inputColor","keyboardColor","highlightColor","toColor","stringToInt","tada","__setPlayerMessage","input","keyboard","normalKeys","dummy","submit","updateInput","startsWith","substring","blur","parseInt","updateInputQuest","submitQuest","AFK","template","toggleActiveMode","chatInput","top","margin","keyCode","jukebox","audio","action","songNames","speed","g","isJumping","forwardVelocity","verticalVelocity","jumpEvent","Event","landEvent","jumpDirection","Vector3","jump","timesince","getTime","lastJumpTap","changedTouches","pageY","addScaledVector","translateY","land","dispatchEvent","fancySphere","shaderName","shaderfrog","uniforms","backgroundColor","barrier1","error","energyDial","testRoomSound","_","bar","along","bars","bottom","spread","autoplay","playerSpeed","spawnPosition","lastD","barrierBurnEvent","barrierDeactivatedEvent","numShocks","messages","warnings","isDeactivated","checkSolutionInterval","mp","distanceTo","deactivate","sound__blast","random","sound__shock","pauseSound","sound__victory","registerPrimitive","defaultComponents","barrier","loop","mappings","snd","shock","blast","victory","firstItem","counter","split","reduce","acc","curValue","curIndex","arr","curObj","prev","performance","toString","replace","substr","isEqual","other","compare","item1","item2","itemType","call","hasOwnProperty","num","randomFromArray","array","str","hash","charCodeAt","ShaderRuntime","extend","arguments","obj","l","clone","omit","cloned","mainCamera","cubeCameras","reserved","time","cameraPosition","umap","float","int","vec2","Vector2","vec3","vec4","Vector4","samplerCube","sampler2D","camera","Camera","Error","renderTarget","identifier","findBy","shaderTypes","shader","newShaderData","runningShaders","oldName","newName","shaderType","initted","uniform","newData","uniformName","fragment","vertex","getUmap","glslType","RawShaderMaterial","viewMatrix","matrixWorldInverse","frog_runtime","clock","Clock","registerCamera","systems","hasLoaded","bind","updateShaders","getElapsedTime","originalMaterial","shaderData","get","threshold","affects","soundIsPlaying","baseEffects","playerDistanceTo","hud","proximityGlitch","statsElement","containers","generateRegions","pointerEvents","pointsDial","magicDial","oxygenMeter","mode","isRunning","determineDevice","welcomeMsg","voice","voices","speechSynthesis","getVoices","SpeechSynthesisUtterance","pitch","rate","volume","speak","sayall","printVoices","lang","soundName","Audio","scenes","otherPlayers","leftHand","rightHand","event","CustomEvent","bubbles","cancelable","fireParticles","particles","fire","mobileSetup","mylatesttap","mbc","icon","icon2","standardSetup","oculusSetup","xr","isSessionSupported","vrDevice","userAgent","isMobile","getVRDisplays","displays","displayName","avatars","avatarType2Add","model","HEAD","HAND_L","HAND_R","lefthand","righthand","__addOtherPlayer","newPlayerObject","avatarType","test","__updateOtherPlayers","o","op","yOffset","degToRad","isWalking","timePlayed","lhp","lhr","rhp","rhr","__removePlayer","playerLeft","me","eyelevel","cursorcolor","rayobjects","rayfar","addCam","addHands","addMyListeners","spawnPos","spawnRot","totalSteps","ic","cc","setOculusCtls","enterVR","loaded","object","traverse","node","isMesh","setTouchCtls","setKeyCtls","pos","Number","rot","which","setPlayerData","sendUpdateToServer","tracks","bgm","songs","bgmUrlStart","bgmUrlEnd","nextSongBtn","playNext","currentSongIndex","playTrackIndex","crossorigin","load","playAll","bgmlite","io","authid","lastPlayerData","isInitialized","un","pw","success","anim","firstElementChild","setAvatar","initializePlayerData","warn","deepEqual","bodiesData","states","dirty","ibs","playersObject","playerLeftMsg","location","reload","collectibles","collectedEntity","sound__loop","sound__collect","cb","collector","cloneNode","spawns","spawnDelay","soundCollect","soundLoop","collect","parentElement","disconnected","waypoints","roam","waypointsIndex","moves","npc","addListeners","requestMove","onNavigationEnd","dest","setPosition","move","setWaypoints","waypointsArray","addWaypoint","waypoint","db","keyValueObject","userdata","LED","toggleLED","iot","onLED","offLED","setLED","state","iotAPI"],"mappings":"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"}